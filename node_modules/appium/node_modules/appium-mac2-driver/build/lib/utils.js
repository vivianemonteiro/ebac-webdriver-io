"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.listChildrenProcessIds = listChildrenProcessIds;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _teen_process = require("teen_process");

async function listChildrenProcessIds(parentPid) {
  const {
    stdout
  } = await (0, _teen_process.exec)('ps', ['axu', '-o', 'ppid']);
  return stdout.split('\n').filter(_lodash.default.trim).map(line => {
    const [, pid, ...rest] = line.split(/\s+/).filter(_lodash.default.trim);
    return [pid, _lodash.default.last(rest)];
  }).filter(([, ppid]) => ppid === `${parentPid}`).map(([pid]) => pid);
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi91dGlscy5qcyJdLCJuYW1lcyI6WyJsaXN0Q2hpbGRyZW5Qcm9jZXNzSWRzIiwicGFyZW50UGlkIiwic3Rkb3V0Iiwic3BsaXQiLCJmaWx0ZXIiLCJfIiwidHJpbSIsIm1hcCIsImxpbmUiLCJwaWQiLCJyZXN0IiwibGFzdCIsInBwaWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBVUEsZUFBZUEsc0JBQWYsQ0FBdUNDLFNBQXZDLEVBQWtEO0FBQ2hELFFBQU07QUFBRUMsSUFBQUE7QUFBRixNQUFhLE1BQU0sd0JBQUssSUFBTCxFQUFXLENBQUMsS0FBRCxFQUFRLElBQVIsRUFBYyxNQUFkLENBQVgsQ0FBekI7QUFFQSxTQUFPQSxNQUFNLENBQUNDLEtBQVAsQ0FBYSxJQUFiLEVBQ0pDLE1BREksQ0FDR0MsZ0JBQUVDLElBREwsRUFFSkMsR0FGSSxDQUVDQyxJQUFELElBQVU7QUFDYixVQUFNLEdBQUdDLEdBQUgsRUFBUSxHQUFHQyxJQUFYLElBQW1CRixJQUFJLENBQUNMLEtBQUwsQ0FBVyxLQUFYLEVBQWtCQyxNQUFsQixDQUF5QkMsZ0JBQUVDLElBQTNCLENBQXpCO0FBQ0EsV0FBTyxDQUFDRyxHQUFELEVBQU1KLGdCQUFFTSxJQUFGLENBQU9ELElBQVAsQ0FBTixDQUFQO0FBQ0QsR0FMSSxFQU1KTixNQU5JLENBTUcsQ0FBQyxHQUFHUSxJQUFILENBQUQsS0FBY0EsSUFBSSxLQUFNLEdBQUVYLFNBQVUsRUFOdkMsRUFPSk0sR0FQSSxDQU9BLENBQUMsQ0FBQ0UsR0FBRCxDQUFELEtBQVdBLEdBUFgsQ0FBUDtBQVFEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGV4ZWMgfSBmcm9tICd0ZWVuX3Byb2Nlc3MnO1xuXG4vKipcbiAqIFJldHJpZXZlcyBwcm9jZXNzIGlkcyBvZiBhbGwgdGhlIGNoaWxkcmVuIHByb2Nlc3NlcyBjcmVhdGVkIGJ5IHRoZSBnaXZlblxuICogcGFyZW50IHByb2Nlc3MgaWRlbnRpZmllclxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gcGFyZW50UGlkIHBhcmVudCBwcm9jZXNzIElEXG4gKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gdGhlIGxpc3Qgb2YgbWF0Y2hlZCBjaGlsZHJlbiBwcm9jZXNzIGlkc1xuICogb3IgYW4gZW1wdHkgbGlzdCBpZiBub25lIG1hdGNoZWRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gbGlzdENoaWxkcmVuUHJvY2Vzc0lkcyAocGFyZW50UGlkKSB7XG4gIGNvbnN0IHsgc3Rkb3V0IH0gPSBhd2FpdCBleGVjKCdwcycsIFsnYXh1JywgJy1vJywgJ3BwaWQnXSk7XG4gIC8vIFVTRVIgIFBJRCAgJUNQVSAlTUVNICBWU1ogIFJTUyAgIFRUICBTVEFUIFNUQVJURUQgIFRJTUUgQ09NTUFORCAgUFBJRFxuICByZXR1cm4gc3Rkb3V0LnNwbGl0KCdcXG4nKVxuICAgIC5maWx0ZXIoXy50cmltKVxuICAgIC5tYXAoKGxpbmUpID0+IHtcbiAgICAgIGNvbnN0IFssIHBpZCwgLi4ucmVzdF0gPSBsaW5lLnNwbGl0KC9cXHMrLykuZmlsdGVyKF8udHJpbSk7XG4gICAgICByZXR1cm4gW3BpZCwgXy5sYXN0KHJlc3QpXTtcbiAgICB9KVxuICAgIC5maWx0ZXIoKFssIHBwaWRdKSA9PiBwcGlkID09PSBgJHtwYXJlbnRQaWR9YClcbiAgICAubWFwKChbcGlkXSkgPT4gcGlkKTtcbn1cblxuZXhwb3J0IHsgbGlzdENoaWxkcmVuUHJvY2Vzc0lkcyB9O1xuIl0sImZpbGUiOiJsaWIvdXRpbHMuanMiLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
