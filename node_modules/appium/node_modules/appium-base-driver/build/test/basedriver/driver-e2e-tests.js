"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _2 = require("../..");

var _constants = require("../../lib/constants");

var _axios = _interopRequireDefault(require("axios"));

var _chai = _interopRequireDefault(require("chai"));

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _bluebird = _interopRequireDefault(require("bluebird"));

const should = _chai.default.should();

const DEFAULT_ARGS = {
  address: 'localhost',
  port: 8181
};

_chai.default.use(_chaiAsPromised.default);

function baseDriverE2ETests(DriverClass, defaultCaps = {}) {
  describe('BaseDriver (e2e)', function () {
    let baseServer,
        d = new DriverClass(DEFAULT_ARGS);
    before(async function () {
      baseServer = await (0, _2.server)({
        routeConfiguringFunction: (0, _2.routeConfiguringFunction)(d),
        port: DEFAULT_ARGS.port
      });
    });
    after(async function () {
      await baseServer.close();
    });

    async function startSession(caps) {
      return (await (0, _axios.default)({
        url: 'http://localhost:8181/wd/hub/session',
        method: 'POST',
        data: {
          desiredCapabilities: caps,
          requiredCapabilities: {}
        }
      })).data;
    }

    async function endSession(id) {
      return (await (0, _axios.default)({
        url: `http://localhost:8181/wd/hub/session/${id}`,
        method: 'DELETE',
        validateStatus: null
      })).data;
    }

    async function getSession(id) {
      return (await (0, _axios.default)({
        url: `http://localhost:8181/wd/hub/session/${id}`
      })).data;
    }

    describe('session handling', function () {
      it('should handle idempotency while creating sessions', async function () {
        const sessionIds = [];
        let times = 0;

        do {
          const {
            sessionId
          } = (await (0, _axios.default)({
            url: 'http://localhost:8181/wd/hub/session',
            headers: {
              'X-Idempotency-Key': '123456'
            },
            method: 'POST',
            data: {
              desiredCapabilities: defaultCaps,
              requiredCapabilities: {}
            },
            simple: false,
            resolveWithFullResponse: true
          })).data;
          sessionIds.push(sessionId);
          times++;
        } while (times < 2);

        _lodash.default.uniq(sessionIds).length.should.equal(1);

        const {
          status,
          data
        } = await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionIds[0]}`,
          method: 'DELETE'
        });
        status.should.equal(200);
        data.status.should.equal(0);
      });
      it('should handle idempotency while creating parallel sessions', async function () {
        const reqs = [];
        let times = 0;

        do {
          reqs.push((0, _axios.default)({
            url: 'http://localhost:8181/wd/hub/session',
            headers: {
              'X-Idempotency-Key': '12345'
            },
            method: 'POST',
            data: {
              desiredCapabilities: defaultCaps,
              requiredCapabilities: {}
            }
          }));
          times++;
        } while (times < 2);

        const sessionIds = (await _bluebird.default.all(reqs)).map(x => x.data.sessionId);

        _lodash.default.uniq(sessionIds).length.should.equal(1);

        const {
          status,
          data
        } = await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionIds[0]}`,
          method: 'DELETE'
        });
        status.should.equal(200);
        data.status.should.equal(0);
      });
      it('should create session and retrieve a session id, then delete it', async function () {
        let {
          status,
          data
        } = await (0, _axios.default)({
          url: 'http://localhost:8181/wd/hub/session',
          method: 'POST',
          data: {
            desiredCapabilities: defaultCaps,
            requiredCapabilities: {}
          }
        });
        status.should.equal(200);
        data.status.should.equal(0);
        should.exist(data.sessionId);
        data.value.should.eql(defaultCaps);
        ({
          status,
          data
        } = await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`,
          method: 'DELETE'
        }));
        status.should.equal(200);
        data.status.should.equal(0);
        should.equal(d.sessionId, null);
      });
    });
    it.skip('should throw NYI for commands not implemented', async function () {});
    describe('command timeouts', function () {
      let originalFindElement, originalFindElements;

      async function startTimeoutSession(timeout) {
        let caps = _lodash.default.clone(defaultCaps);

        caps.newCommandTimeout = timeout;
        return await startSession(caps);
      }

      before(function () {
        originalFindElement = d.findElement;

        d.findElement = function () {
          return 'foo';
        }.bind(d);

        originalFindElements = d.findElements;

        d.findElements = async function () {
          await _bluebird.default.delay(200);
          return ['foo'];
        }.bind(d);
      });
      after(function () {
        d.findElement = originalFindElement;
        d.findElements = originalFindElements;
      });
      it('should set a default commandTimeout', async function () {
        let newSession = await startTimeoutSession();
        d.newCommandTimeoutMs.should.be.above(0);
        await endSession(newSession.sessionId);
      });
      it('should timeout on commands using commandTimeout cap', async function () {
        let newSession = await startTimeoutSession(0.25);
        await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/element`,
          method: 'POST',
          data: {
            using: 'name',
            value: 'foo'
          }
        });
        await _bluebird.default.delay(400);
        const {
          data
        } = await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`,
          validateStatus: null
        });
        data.status.should.equal(6);
        should.equal(d.sessionId, null);
        const {
          status
        } = await endSession(newSession.sessionId);
        status.should.equal(6);
      });
      it('should not timeout with commandTimeout of false', async function () {
        let newSession = await startTimeoutSession(0.1);
        let start = Date.now();
        const {
          value
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/elements`,
          method: 'POST',
          data: {
            using: 'name',
            value: 'foo'
          }
        })).data;
        (Date.now() - start).should.be.above(150);
        value.should.eql(['foo']);
        await endSession(newSession.sessionId);
      });
      it('should not timeout with commandTimeout of 0', async function () {
        d.newCommandTimeoutMs = 2;
        let newSession = await startTimeoutSession(0);
        await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/element`,
          method: 'POST',
          data: {
            using: 'name',
            value: 'foo'
          }
        });
        await _bluebird.default.delay(400);
        let {
          status
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`
        })).data;
        status.should.equal(0);
        ({
          status
        } = await endSession(newSession.sessionId));
        status.should.equal(0);
        d.newCommandTimeoutMs = 60 * 1000;
      });
      it('should not timeout if its just the command taking awhile', async function () {
        let newSession = await startTimeoutSession(0.25);
        await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}/element`,
          method: 'POST',
          data: {
            using: 'name',
            value: 'foo'
          }
        });
        await _bluebird.default.delay(400);
        let {
          status
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${d.sessionId}`,
          validateStatus: null
        })).data;
        status.should.equal(6);
        should.equal(d.sessionId, null);
        ({
          status
        } = await endSession(newSession.sessionId));
        status.should.equal(6);
      });
      it('should not have a timer running before or after a session', async function () {
        should.not.exist(d.noCommandTimer);
        let newSession = await startTimeoutSession(0.25);
        newSession.sessionId.should.equal(d.sessionId);
        should.exist(d.noCommandTimer);
        await endSession(newSession.sessionId);
        should.not.exist(d.noCommandTimer);
      });
    });
    describe('settings api', function () {
      before(function () {
        d.settings = new _2.DeviceSettings({
          ignoreUnimportantViews: false
        });
      });
      it('should be able to get settings object', function () {
        d.settings.getSettings().ignoreUnimportantViews.should.be.false;
      });
      it('should throw error when updateSettings method is not defined', async function () {
        await d.settings.update({
          ignoreUnimportantViews: true
        }).should.eventually.be.rejectedWith('onSettingsUpdate');
      });
      it('should throw error for invalid update object', async function () {
        await d.settings.update('invalid json').should.eventually.be.rejectedWith('JSON');
      });
    });
    describe('unexpected exits', function () {
      it('should reject a current command when the driver crashes', async function () {
        d._oldGetStatus = d.getStatus;

        try {
          d.getStatus = async function () {
            await _bluebird.default.delay(5000);
          }.bind(d);

          const reqPromise = (0, _axios.default)({
            url: 'http://localhost:8181/wd/hub/status',
            validateStatus: null
          });
          await _bluebird.default.delay(100);
          const shutdownEventPromise = new _bluebird.default((resolve, reject) => {
            setTimeout(() => reject(new Error('onUnexpectedShutdown event is expected to be fired within 5 seconds timeout')), 5000);
            d.onUnexpectedShutdown(resolve);
          });
          d.startUnexpectedShutdown(new Error('Crashytimes'));
          const {
            status,
            value
          } = (await reqPromise).data;
          status.should.equal(13);
          value.message.should.contain('Crashytimes');
          await shutdownEventPromise;
        } finally {
          d.getStatus = d._oldGetStatus;
        }
      });
    });
    describe('event timings', function () {
      it('should not add timings if not using opt-in cap', async function () {
        let session = await startSession(defaultCaps);
        let res = await getSession(session.sessionId);
        should.not.exist(res.events);
        await endSession(session.sessionId);
      });
      it('should add start session timings', async function () {
        let caps = Object.assign({}, defaultCaps, {
          eventTimings: true
        });
        let session = await startSession(caps);
        let res = (await getSession(session.sessionId)).value;
        should.exist(res.events);
        should.exist(res.events.newSessionRequested);
        should.exist(res.events.newSessionStarted);
        res.events.newSessionRequested[0].should.be.a('number');
        res.events.newSessionStarted[0].should.be.a('number');
        await endSession(session.sessionId);
      });
    });
    describe('execute driver script', function () {
      let originalFindElement, sessionId;
      before(function () {
        d.allowInsecure = ['execute_driver_script'];
        originalFindElement = d.findElement;

        d.findElement = function (strategy, selector) {
          if (strategy === 'accessibility id' && selector === 'amazing') {
            return {
              [_constants.W3C_ELEMENT_KEY]: 'element-id-1'
            };
          }

          throw new _2.errors.NoSuchElementError('not found');
        }.bind(d);
      });
      beforeEach(async function () {
        ({
          sessionId
        } = await startSession(defaultCaps));
      });
      after(function () {
        d.findElement = originalFindElement;
      });
      afterEach(async function () {
        await endSession(sessionId);
      });
      it('should not work unless the allowInsecure feature flag is set', async function () {
        d._allowInsecure = d.allowInsecure;

        try {
          d.allowInsecure = [];
          const script = `return 'foo'`;
          await (0, _axios.default)({
            url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
            method: 'POST',
            data: {
              script,
              type: 'wd'
            }
          }).should.eventually.be.rejected;
          await endSession(sessionId);
        } finally {
          d.allowInsecure = d._allowInsecure;
        }
      });
      it('should execute a webdriverio script in the context of session', async function () {
        const script = `
          const timeouts = await driver.getTimeouts();
          const status = await driver.status();
          return [timeouts, status];
        `;
        const {
          value
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          data: {
            script,
            type: 'webdriverio'
          }
        })).data;
        const expectedTimeouts = {
          command: 250,
          implicit: 0
        };
        const expectedStatus = {};
        value.result.should.eql([expectedTimeouts, expectedStatus]);
      });
      it('should fail with any script type other than webdriverio currently', async function () {
        const script = `return 'foo'`;
        await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          data: {
            script,
            type: 'wd'
          }
        }).should.eventually.be.rejected;
      });
      it('should execute a webdriverio script that returns elements correctly', async function () {
        const script = `
          return await driver.$("~amazing");
        `;
        const {
          value
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          data: {
            script
          }
        })).data;
        value.result.should.eql({
          [_constants.W3C_ELEMENT_KEY]: 'element-id-1',
          [_constants.MJSONWP_ELEMENT_KEY]: 'element-id-1'
        });
      });
      it('should execute a webdriverio script that returns elements in deep structure', async function () {
        const script = `
          const el = await driver.$("~amazing");
          return {element: el, elements: [el, el]};
        `;
        const {
          value
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          data: {
            script
          }
        })).data;
        const elObj = {
          [_constants.W3C_ELEMENT_KEY]: 'element-id-1',
          [_constants.MJSONWP_ELEMENT_KEY]: 'element-id-1'
        };
        value.result.should.eql({
          element: elObj,
          elements: [elObj, elObj]
        });
      });
      it('should store and return logs to the user', async function () {
        const script = `
          console.log("foo");
          console.log("foo2");
          console.warn("bar");
          console.error("baz");
          return null;
        `;
        const {
          value
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          data: {
            script
          }
        })).data;
        value.logs.should.eql({
          log: ['foo', 'foo2'],
          warn: ['bar'],
          error: ['baz']
        });
      });
      it('should have appium specific commands available', async function () {
        const script = `
          return typeof driver.lock;
        `;
        const {
          value
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          data: {
            script
          }
        })).data;
        value.result.should.eql('function');
      });
      it('should correctly handle errors that happen in a webdriverio script', async function () {
        const script = `
          return await driver.$("~notfound");
        `;
        const {
          data
        } = await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          validateStatus: null,
          data: {
            script
          }
        });
        data.should.eql({
          sessionId,
          status: 13,
          value: {
            message: 'An unknown server-side error occurred while processing the command. Original error: Could not execute driver script. Original error was: Error: not found'
          }
        });
      });
      it('should correctly handle errors that happen when a script cannot be compiled', async function () {
        const script = `
          return {;
        `;
        const {
          data
        } = await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          validateStatus: null,
          data: {
            script
          }
        });
        sessionId.should.eql(data.sessionId);
        data.status.should.eql(13);
        data.value.should.have.property('message');
        data.value.message.should.match(/An unknown server-side error occurred while processing the command. Original error: Could not execute driver script. Original error was: Error: Unexpected token '?;'?/);
      });
      it('should be able to set a timeout on a driver script', async function () {
        const script = `
          await Promise.delay(1000);
          return true;
        `;
        const {
          value
        } = (await (0, _axios.default)({
          url: `http://localhost:8181/wd/hub/session/${sessionId}/appium/execute_driver`,
          method: 'POST',
          validateStatus: null,
          data: {
            script,
            timeout: 50
          }
        })).data;
        value.message.should.match(/.+50.+timeout.+/);
      });
    });
  });
}

var _default = baseDriverE2ETests;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYmFzZWRyaXZlci9kcml2ZXItZTJlLXRlc3RzLmpzIl0sIm5hbWVzIjpbInNob3VsZCIsImNoYWkiLCJERUZBVUxUX0FSR1MiLCJhZGRyZXNzIiwicG9ydCIsInVzZSIsImNoYWlBc1Byb21pc2VkIiwiYmFzZURyaXZlckUyRVRlc3RzIiwiRHJpdmVyQ2xhc3MiLCJkZWZhdWx0Q2FwcyIsImRlc2NyaWJlIiwiYmFzZVNlcnZlciIsImQiLCJiZWZvcmUiLCJyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24iLCJhZnRlciIsImNsb3NlIiwic3RhcnRTZXNzaW9uIiwiY2FwcyIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJkZXNpcmVkQ2FwYWJpbGl0aWVzIiwicmVxdWlyZWRDYXBhYmlsaXRpZXMiLCJlbmRTZXNzaW9uIiwiaWQiLCJ2YWxpZGF0ZVN0YXR1cyIsImdldFNlc3Npb24iLCJpdCIsInNlc3Npb25JZHMiLCJ0aW1lcyIsInNlc3Npb25JZCIsImhlYWRlcnMiLCJzaW1wbGUiLCJyZXNvbHZlV2l0aEZ1bGxSZXNwb25zZSIsInB1c2giLCJfIiwidW5pcSIsImxlbmd0aCIsImVxdWFsIiwic3RhdHVzIiwicmVxcyIsIkIiLCJhbGwiLCJtYXAiLCJ4IiwiZXhpc3QiLCJ2YWx1ZSIsImVxbCIsInNraXAiLCJvcmlnaW5hbEZpbmRFbGVtZW50Iiwib3JpZ2luYWxGaW5kRWxlbWVudHMiLCJzdGFydFRpbWVvdXRTZXNzaW9uIiwidGltZW91dCIsImNsb25lIiwibmV3Q29tbWFuZFRpbWVvdXQiLCJmaW5kRWxlbWVudCIsImJpbmQiLCJmaW5kRWxlbWVudHMiLCJkZWxheSIsIm5ld1Nlc3Npb24iLCJuZXdDb21tYW5kVGltZW91dE1zIiwiYmUiLCJhYm92ZSIsInVzaW5nIiwic3RhcnQiLCJEYXRlIiwibm93Iiwibm90Iiwibm9Db21tYW5kVGltZXIiLCJzZXR0aW5ncyIsIkRldmljZVNldHRpbmdzIiwiaWdub3JlVW5pbXBvcnRhbnRWaWV3cyIsImdldFNldHRpbmdzIiwiZmFsc2UiLCJ1cGRhdGUiLCJldmVudHVhbGx5IiwicmVqZWN0ZWRXaXRoIiwiX29sZEdldFN0YXR1cyIsImdldFN0YXR1cyIsInJlcVByb21pc2UiLCJzaHV0ZG93bkV2ZW50UHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJvblVuZXhwZWN0ZWRTaHV0ZG93biIsInN0YXJ0VW5leHBlY3RlZFNodXRkb3duIiwibWVzc2FnZSIsImNvbnRhaW4iLCJzZXNzaW9uIiwicmVzIiwiZXZlbnRzIiwiT2JqZWN0IiwiYXNzaWduIiwiZXZlbnRUaW1pbmdzIiwibmV3U2Vzc2lvblJlcXVlc3RlZCIsIm5ld1Nlc3Npb25TdGFydGVkIiwiYSIsImFsbG93SW5zZWN1cmUiLCJzdHJhdGVneSIsInNlbGVjdG9yIiwiVzNDX0VMRU1FTlRfS0VZIiwiZXJyb3JzIiwiTm9TdWNoRWxlbWVudEVycm9yIiwiYmVmb3JlRWFjaCIsImFmdGVyRWFjaCIsIl9hbGxvd0luc2VjdXJlIiwic2NyaXB0IiwidHlwZSIsInJlamVjdGVkIiwiZXhwZWN0ZWRUaW1lb3V0cyIsImNvbW1hbmQiLCJpbXBsaWNpdCIsImV4cGVjdGVkU3RhdHVzIiwicmVzdWx0IiwiTUpTT05XUF9FTEVNRU5UX0tFWSIsImVsT2JqIiwiZWxlbWVudCIsImVsZW1lbnRzIiwibG9ncyIsImxvZyIsIndhcm4iLCJlcnJvciIsImhhdmUiLCJwcm9wZXJ0eSIsIm1hdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLE1BQU1BLE1BQU0sR0FBR0MsY0FBS0QsTUFBTCxFQUFmOztBQUNBLE1BQU1FLFlBQVksR0FBRztBQUNuQkMsRUFBQUEsT0FBTyxFQUFFLFdBRFU7QUFFbkJDLEVBQUFBLElBQUksRUFBRTtBQUZhLENBQXJCOztBQUlBSCxjQUFLSSxHQUFMLENBQVNDLHVCQUFUOztBQUVBLFNBQVNDLGtCQUFULENBQTZCQyxX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YXNoJztcbmltcG9ydCB7IHNlcnZlciwgcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uLCBEZXZpY2VTZXR0aW5ncywgZXJyb3JzIH0gZnJvbSAnLi4vLi4nO1xuaW1wb3J0IHtcbiAgTUpTT05XUF9FTEVNRU5UX0tFWSwgVzNDX0VMRU1FTlRfS0VZXG59IGZyb20gJy4uLy4uL2xpYi9jb25zdGFudHMnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5jb25zdCBzaG91bGQgPSBjaGFpLnNob3VsZCgpO1xuY29uc3QgREVGQVVMVF9BUkdTID0ge1xuICBhZGRyZXNzOiAnbG9jYWxob3N0JyxcbiAgcG9ydDogODE4MVxufTtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxuZnVuY3Rpb24gYmFzZURyaXZlckUyRVRlc3RzIChEcml2ZXJDbGFzcywgZGVmYXVsdENhcHMgPSB7fSkge1xuICBkZXNjcmliZSgnQmFzZURyaXZlciAoZTJlKScsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgYmFzZVNlcnZlciwgZCA9IG5ldyBEcml2ZXJDbGFzcyhERUZBVUxUX0FSR1MpO1xuICAgIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBiYXNlU2VydmVyID0gYXdhaXQgc2VydmVyKHtcbiAgICAgICAgcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uOiByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24oZCksXG4gICAgICAgIHBvcnQ6IERFRkFVTFRfQVJHUy5wb3J0LFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgYWZ0ZXIoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgYmFzZVNlcnZlci5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gc3RhcnRTZXNzaW9uIChjYXBzKSB7XG4gICAgICByZXR1cm4gKGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IHtkZXNpcmVkQ2FwYWJpbGl0aWVzOiBjYXBzLCByZXF1aXJlZENhcGFiaWxpdGllczoge319LFxuICAgICAgfSkpLmRhdGE7XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gZW5kU2Vzc2lvbiAoaWQpIHtcbiAgICAgIHJldHVybiAoYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtpZH1gLFxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgIH0pKS5kYXRhO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb24gKGlkKSB7XG4gICAgICByZXR1cm4gKGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7aWR9YCxcbiAgICAgIH0pKS5kYXRhO1xuICAgIH1cblxuICAgIGRlc2NyaWJlKCdzZXNzaW9uIGhhbmRsaW5nJywgZnVuY3Rpb24gKCkge1xuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgaWRlbXBvdGVuY3kgd2hpbGUgY3JlYXRpbmcgc2Vzc2lvbnMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25JZHMgPSBbXTtcbiAgICAgICAgbGV0IHRpbWVzID0gMDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGNvbnN0IHtzZXNzaW9uSWR9ID0gKGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdYLUlkZW1wb3RlbmN5LUtleSc6ICcxMjM0NTYnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge2Rlc2lyZWRDYXBhYmlsaXRpZXM6IGRlZmF1bHRDYXBzLCByZXF1aXJlZENhcGFiaWxpdGllczoge319LFxuICAgICAgICAgICAgc2ltcGxlOiBmYWxzZSxcbiAgICAgICAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiB0cnVlXG4gICAgICAgICAgfSkpLmRhdGE7XG5cbiAgICAgICAgICBzZXNzaW9uSWRzLnB1c2goc2Vzc2lvbklkKTtcbiAgICAgICAgICB0aW1lcysrO1xuICAgICAgICB9IHdoaWxlICh0aW1lcyA8IDIpO1xuICAgICAgICBfLnVuaXEoc2Vzc2lvbklkcykubGVuZ3RoLnNob3VsZC5lcXVhbCgxKTtcblxuICAgICAgICBjb25zdCB7c3RhdHVzLCBkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWRzWzBdfWAsXG4gICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoMjAwKTtcbiAgICAgICAgZGF0YS5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGlkZW1wb3RlbmN5IHdoaWxlIGNyZWF0aW5nIHBhcmFsbGVsIHNlc3Npb25zJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCByZXFzID0gW107XG4gICAgICAgIGxldCB0aW1lcyA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICByZXFzLnB1c2goYXhpb3Moe1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ1gtSWRlbXBvdGVuY3ktS2V5JzogJzEyMzQ1JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtkZXNpcmVkQ2FwYWJpbGl0aWVzOiBkZWZhdWx0Q2FwcywgcmVxdWlyZWRDYXBhYmlsaXRpZXM6IHt9fSxcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgdGltZXMrKztcbiAgICAgICAgfSB3aGlsZSAodGltZXMgPCAyKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkcyA9IChhd2FpdCBCLmFsbChyZXFzKSkubWFwKCh4KSA9PiB4LmRhdGEuc2Vzc2lvbklkKTtcbiAgICAgICAgXy51bmlxKHNlc3Npb25JZHMpLmxlbmd0aC5zaG91bGQuZXF1YWwoMSk7XG5cbiAgICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7c2Vzc2lvbklkc1swXX1gLFxuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIH0pO1xuICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICAgIGRhdGEuc3RhdHVzLnNob3VsZC5lcXVhbCgwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBzZXNzaW9uIGFuZCByZXRyaWV2ZSBhIHNlc3Npb24gaWQsIHRoZW4gZGVsZXRlIGl0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uJyxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBkYXRhOiB7ZGVzaXJlZENhcGFiaWxpdGllczogZGVmYXVsdENhcHMsIHJlcXVpcmVkQ2FwYWJpbGl0aWVzOiB7fX0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoMjAwKTtcbiAgICAgICAgZGF0YS5zdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgICBzaG91bGQuZXhpc3QoZGF0YS5zZXNzaW9uSWQpO1xuICAgICAgICBkYXRhLnZhbHVlLnNob3VsZC5lcWwoZGVmYXVsdENhcHMpO1xuXG4gICAgICAgICh7c3RhdHVzLCBkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtkLnNlc3Npb25JZH1gLFxuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIH0pKTtcblxuICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICAgIGRhdGEuc3RhdHVzLnNob3VsZC5lcXVhbCgwKTtcbiAgICAgICAgc2hvdWxkLmVxdWFsKGQuc2Vzc2lvbklkLCBudWxsKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIHRocm93IE5ZSSBmb3IgY29tbWFuZHMgbm90IGltcGxlbWVudGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NvbW1hbmQgdGltZW91dHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgb3JpZ2luYWxGaW5kRWxlbWVudCwgb3JpZ2luYWxGaW5kRWxlbWVudHM7XG4gICAgICBhc3luYyBmdW5jdGlvbiBzdGFydFRpbWVvdXRTZXNzaW9uICh0aW1lb3V0KSB7XG4gICAgICAgIGxldCBjYXBzID0gXy5jbG9uZShkZWZhdWx0Q2Fwcyk7XG4gICAgICAgIGNhcHMubmV3Q29tbWFuZFRpbWVvdXQgPSB0aW1lb3V0O1xuICAgICAgICByZXR1cm4gYXdhaXQgc3RhcnRTZXNzaW9uKGNhcHMpO1xuICAgICAgfVxuXG4gICAgICBiZWZvcmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBvcmlnaW5hbEZpbmRFbGVtZW50ID0gZC5maW5kRWxlbWVudDtcbiAgICAgICAgZC5maW5kRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gJ2Zvbyc7XG4gICAgICAgIH0uYmluZChkKTtcblxuICAgICAgICBvcmlnaW5hbEZpbmRFbGVtZW50cyA9IGQuZmluZEVsZW1lbnRzO1xuICAgICAgICBkLmZpbmRFbGVtZW50cyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBhd2FpdCBCLmRlbGF5KDIwMCk7XG4gICAgICAgICAgcmV0dXJuIFsnZm9vJ107XG4gICAgICAgIH0uYmluZChkKTtcbiAgICAgIH0pO1xuXG4gICAgICBhZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGQuZmluZEVsZW1lbnQgPSBvcmlnaW5hbEZpbmRFbGVtZW50O1xuICAgICAgICBkLmZpbmRFbGVtZW50cyA9IG9yaWdpbmFsRmluZEVsZW1lbnRzO1xuICAgICAgfSk7XG5cblxuICAgICAgaXQoJ3Nob3VsZCBzZXQgYSBkZWZhdWx0IGNvbW1hbmRUaW1lb3V0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgbmV3U2Vzc2lvbiA9IGF3YWl0IHN0YXJ0VGltZW91dFNlc3Npb24oKTtcbiAgICAgICAgZC5uZXdDb21tYW5kVGltZW91dE1zLnNob3VsZC5iZS5hYm92ZSgwKTtcbiAgICAgICAgYXdhaXQgZW5kU2Vzc2lvbihuZXdTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0aW1lb3V0IG9uIGNvbW1hbmRzIHVzaW5nIGNvbW1hbmRUaW1lb3V0IGNhcCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IG5ld1Nlc3Npb24gPSBhd2FpdCBzdGFydFRpbWVvdXRTZXNzaW9uKDAuMjUpO1xuXG4gICAgICAgIGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtkLnNlc3Npb25JZH0vZWxlbWVudGAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YToge3VzaW5nOiAnbmFtZScsIHZhbHVlOiAnZm9vJ30sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBCLmRlbGF5KDQwMCk7XG4gICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtkLnNlc3Npb25JZH1gLFxuICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS5zdGF0dXMuc2hvdWxkLmVxdWFsKDYpO1xuICAgICAgICBzaG91bGQuZXF1YWwoZC5zZXNzaW9uSWQsIG51bGwpO1xuICAgICAgICBjb25zdCB7c3RhdHVzfSA9IGF3YWl0IGVuZFNlc3Npb24obmV3U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDYpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRpbWVvdXQgd2l0aCBjb21tYW5kVGltZW91dCBvZiBmYWxzZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IG5ld1Nlc3Npb24gPSBhd2FpdCBzdGFydFRpbWVvdXRTZXNzaW9uKDAuMSk7XG4gICAgICAgIGxldCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHt2YWx1ZX0gPSAoYXdhaXQgYXhpb3Moe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke2Quc2Vzc2lvbklkfS9lbGVtZW50c2AsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YToge3VzaW5nOiAnbmFtZScsIHZhbHVlOiAnZm9vJ30sXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICAoRGF0ZS5ub3coKSAtIHN0YXJ0KS5zaG91bGQuYmUuYWJvdmUoMTUwKTtcbiAgICAgICAgdmFsdWUuc2hvdWxkLmVxbChbJ2ZvbyddKTtcbiAgICAgICAgYXdhaXQgZW5kU2Vzc2lvbihuZXdTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgdGltZW91dCB3aXRoIGNvbW1hbmRUaW1lb3V0IG9mIDAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGQubmV3Q29tbWFuZFRpbWVvdXRNcyA9IDI7XG4gICAgICAgIGxldCBuZXdTZXNzaW9uID0gYXdhaXQgc3RhcnRUaW1lb3V0U2Vzc2lvbigwKTtcblxuICAgICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7ZC5zZXNzaW9uSWR9L2VsZW1lbnRgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHt1c2luZzogJ25hbWUnLCB2YWx1ZTogJ2Zvbyd9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgQi5kZWxheSg0MDApO1xuICAgICAgICBsZXQge3N0YXR1c30gPSAoYXdhaXQgYXhpb3Moe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke2Quc2Vzc2lvbklkfWAsXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgICAoe3N0YXR1c30gPSBhd2FpdCBlbmRTZXNzaW9uKG5ld1Nlc3Npb24uc2Vzc2lvbklkKSk7XG4gICAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoMCk7XG5cbiAgICAgICAgZC5uZXdDb21tYW5kVGltZW91dE1zID0gNjAgKiAxMDAwO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IHRpbWVvdXQgaWYgaXRzIGp1c3QgdGhlIGNvbW1hbmQgdGFraW5nIGF3aGlsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IG5ld1Nlc3Npb24gPSBhd2FpdCBzdGFydFRpbWVvdXRTZXNzaW9uKDAuMjUpO1xuICAgICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7ZC5zZXNzaW9uSWR9L2VsZW1lbnRgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHt1c2luZzogJ25hbWUnLCB2YWx1ZTogJ2Zvbyd9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgQi5kZWxheSg0MDApO1xuICAgICAgICBsZXQge3N0YXR1c30gPSAoYXdhaXQgYXhpb3Moe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke2Quc2Vzc2lvbklkfWAsXG4gICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDYpO1xuICAgICAgICBzaG91bGQuZXF1YWwoZC5zZXNzaW9uSWQsIG51bGwpO1xuICAgICAgICAoe3N0YXR1c30gPSBhd2FpdCBlbmRTZXNzaW9uKG5ld1Nlc3Npb24uc2Vzc2lvbklkKSk7XG4gICAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoNik7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgaGF2ZSBhIHRpbWVyIHJ1bm5pbmcgYmVmb3JlIG9yIGFmdGVyIGEgc2Vzc2lvbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2hvdWxkLm5vdC5leGlzdChkLm5vQ29tbWFuZFRpbWVyKTtcbiAgICAgICAgbGV0IG5ld1Nlc3Npb24gPSBhd2FpdCBzdGFydFRpbWVvdXRTZXNzaW9uKDAuMjUpO1xuICAgICAgICBuZXdTZXNzaW9uLnNlc3Npb25JZC5zaG91bGQuZXF1YWwoZC5zZXNzaW9uSWQpO1xuICAgICAgICBzaG91bGQuZXhpc3QoZC5ub0NvbW1hbmRUaW1lcik7XG4gICAgICAgIGF3YWl0IGVuZFNlc3Npb24obmV3U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICBzaG91bGQubm90LmV4aXN0KGQubm9Db21tYW5kVGltZXIpO1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdzZXR0aW5ncyBhcGknLCBmdW5jdGlvbiAoKSB7XG4gICAgICBiZWZvcmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBkLnNldHRpbmdzID0gbmV3IERldmljZVNldHRpbmdzKHtpZ25vcmVVbmltcG9ydGFudFZpZXdzOiBmYWxzZX0pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gZ2V0IHNldHRpbmdzIG9iamVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZC5zZXR0aW5ncy5nZXRTZXR0aW5ncygpLmlnbm9yZVVuaW1wb3J0YW50Vmlld3Muc2hvdWxkLmJlLmZhbHNlO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gdXBkYXRlU2V0dGluZ3MgbWV0aG9kIGlzIG5vdCBkZWZpbmVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBhd2FpdCBkLnNldHRpbmdzLnVwZGF0ZSh7aWdub3JlVW5pbXBvcnRhbnRWaWV3czogdHJ1ZX0pLnNob3VsZC5ldmVudHVhbGx5XG4gICAgICAgICAgICAgICAgLmJlLnJlamVjdGVkV2l0aCgnb25TZXR0aW5nc1VwZGF0ZScpO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBpbnZhbGlkIHVwZGF0ZSBvYmplY3QnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF3YWl0IGQuc2V0dGluZ3MudXBkYXRlKCdpbnZhbGlkIGpzb24nKS5zaG91bGQuZXZlbnR1YWxseVxuICAgICAgICAgICAgICAgIC5iZS5yZWplY3RlZFdpdGgoJ0pTT04nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3VuZXhwZWN0ZWQgZXhpdHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnc2hvdWxkIHJlamVjdCBhIGN1cnJlbnQgY29tbWFuZCB3aGVuIHRoZSBkcml2ZXIgY3Jhc2hlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZC5fb2xkR2V0U3RhdHVzID0gZC5nZXRTdGF0dXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZC5nZXRTdGF0dXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhd2FpdCBCLmRlbGF5KDUwMDApO1xuICAgICAgICAgIH0uYmluZChkKTtcbiAgICAgICAgICBjb25zdCByZXFQcm9taXNlID0gYXhpb3Moe1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zdGF0dXMnLFxuICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgdGhlIHJlcXVlc3QgZ2V0cyB0byB0aGUgc2VydmVyIGJlZm9yZSBvdXIgc2h1dGRvd25cbiAgICAgICAgICBhd2FpdCBCLmRlbGF5KDEwMCk7XG4gICAgICAgICAgY29uc3Qgc2h1dGRvd25FdmVudFByb21pc2UgPSBuZXcgQigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ29uVW5leHBlY3RlZFNodXRkb3duIGV2ZW50IGlzIGV4cGVjdGVkIHRvIGJlIGZpcmVkIHdpdGhpbiA1IHNlY29uZHMgdGltZW91dCcpKSwgNTAwMCk7XG4gICAgICAgICAgICBkLm9uVW5leHBlY3RlZFNodXRkb3duKHJlc29sdmUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGQuc3RhcnRVbmV4cGVjdGVkU2h1dGRvd24obmV3IEVycm9yKCdDcmFzaHl0aW1lcycpKTtcbiAgICAgICAgICBjb25zdCB7c3RhdHVzLCB2YWx1ZX0gPSAoYXdhaXQgcmVxUHJvbWlzZSkuZGF0YTtcbiAgICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDEzKTtcbiAgICAgICAgICB2YWx1ZS5tZXNzYWdlLnNob3VsZC5jb250YWluKCdDcmFzaHl0aW1lcycpO1xuICAgICAgICAgIGF3YWl0IHNodXRkb3duRXZlbnRQcm9taXNlO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGQuZ2V0U3RhdHVzID0gZC5fb2xkR2V0U3RhdHVzO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdldmVudCB0aW1pbmdzJywgZnVuY3Rpb24gKCkge1xuICAgICAgaXQoJ3Nob3VsZCBub3QgYWRkIHRpbWluZ3MgaWYgbm90IHVzaW5nIG9wdC1pbiBjYXAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBzZXNzaW9uID0gYXdhaXQgc3RhcnRTZXNzaW9uKGRlZmF1bHRDYXBzKTtcbiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IGdldFNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICBzaG91bGQubm90LmV4aXN0KHJlcy5ldmVudHMpO1xuICAgICAgICBhd2FpdCBlbmRTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJ3Nob3VsZCBhZGQgc3RhcnQgc2Vzc2lvbiB0aW1pbmdzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgY2FwcyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRDYXBzLCB7ZXZlbnRUaW1pbmdzOiB0cnVlfSk7XG4gICAgICAgIGxldCBzZXNzaW9uID0gYXdhaXQgc3RhcnRTZXNzaW9uKGNhcHMpO1xuICAgICAgICBsZXQgcmVzID0gKGF3YWl0IGdldFNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uSWQpKS52YWx1ZTtcbiAgICAgICAgc2hvdWxkLmV4aXN0KHJlcy5ldmVudHMpO1xuICAgICAgICBzaG91bGQuZXhpc3QocmVzLmV2ZW50cy5uZXdTZXNzaW9uUmVxdWVzdGVkKTtcbiAgICAgICAgc2hvdWxkLmV4aXN0KHJlcy5ldmVudHMubmV3U2Vzc2lvblN0YXJ0ZWQpO1xuICAgICAgICByZXMuZXZlbnRzLm5ld1Nlc3Npb25SZXF1ZXN0ZWRbMF0uc2hvdWxkLmJlLmEoJ251bWJlcicpO1xuICAgICAgICByZXMuZXZlbnRzLm5ld1Nlc3Npb25TdGFydGVkWzBdLnNob3VsZC5iZS5hKCdudW1iZXInKTtcbiAgICAgICAgYXdhaXQgZW5kU2Vzc2lvbihzZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdleGVjdXRlIGRyaXZlciBzY3JpcHQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBtb2NrIHNvbWUgbWV0aG9kcyBvbiBCYXNlRHJpdmVyIHRoYXQgYXJlbid0IG5vcm1hbGx5IHRoZXJlIGV4Y2VwdCBpblxuICAgICAgLy8gYSBmdWxseSBibG93biBkcml2ZXJcbiAgICAgIGxldCBvcmlnaW5hbEZpbmRFbGVtZW50LCBzZXNzaW9uSWQ7XG4gICAgICBiZWZvcmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBkLmFsbG93SW5zZWN1cmUgPSBbJ2V4ZWN1dGVfZHJpdmVyX3NjcmlwdCddO1xuICAgICAgICBvcmlnaW5hbEZpbmRFbGVtZW50ID0gZC5maW5kRWxlbWVudDtcbiAgICAgICAgZC5maW5kRWxlbWVudCA9IChmdW5jdGlvbiAoc3RyYXRlZ3ksIHNlbGVjdG9yKSB7XG4gICAgICAgICAgaWYgKHN0cmF0ZWd5ID09PSAnYWNjZXNzaWJpbGl0eSBpZCcgJiYgc2VsZWN0b3IgPT09ICdhbWF6aW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHtbVzNDX0VMRU1FTlRfS0VZXTogJ2VsZW1lbnQtaWQtMSd9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuTm9TdWNoRWxlbWVudEVycm9yKCdub3QgZm91bmQnKTtcbiAgICAgICAgfSkuYmluZChkKTtcbiAgICAgIH0pO1xuXG4gICAgICBiZWZvcmVFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKHtzZXNzaW9uSWR9ID0gYXdhaXQgc3RhcnRTZXNzaW9uKGRlZmF1bHRDYXBzKSk7XG4gICAgICB9KTtcblxuICAgICAgYWZ0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBkLmZpbmRFbGVtZW50ID0gb3JpZ2luYWxGaW5kRWxlbWVudDtcbiAgICAgIH0pO1xuXG4gICAgICBhZnRlckVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBhd2FpdCBlbmRTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3Qgd29yayB1bmxlc3MgdGhlIGFsbG93SW5zZWN1cmUgZmVhdHVyZSBmbGFnIGlzIHNldCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZC5fYWxsb3dJbnNlY3VyZSA9IGQuYWxsb3dJbnNlY3VyZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkLmFsbG93SW5zZWN1cmUgPSBbXTtcbiAgICAgICAgICBjb25zdCBzY3JpcHQgPSBgcmV0dXJuICdmb28nYDtcbiAgICAgICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtzY3JpcHQsIHR5cGU6ICd3ZCd9LFxuICAgICAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuICAgICAgICAgIGF3YWl0IGVuZFNlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBkLmFsbG93SW5zZWN1cmUgPSBkLl9hbGxvd0luc2VjdXJlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIGEgd2ViZHJpdmVyaW8gc2NyaXB0IGluIHRoZSBjb250ZXh0IG9mIHNlc3Npb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGBcbiAgICAgICAgICBjb25zdCB0aW1lb3V0cyA9IGF3YWl0IGRyaXZlci5nZXRUaW1lb3V0cygpO1xuICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGRyaXZlci5zdGF0dXMoKTtcbiAgICAgICAgICByZXR1cm4gW3RpbWVvdXRzLCBzdGF0dXNdO1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCB7dmFsdWV9ID0gKGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YToge3NjcmlwdCwgdHlwZTogJ3dlYmRyaXZlcmlvJ30sXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICBjb25zdCBleHBlY3RlZFRpbWVvdXRzID0ge2NvbW1hbmQ6IDI1MCwgaW1wbGljaXQ6IDB9O1xuICAgICAgICBjb25zdCBleHBlY3RlZFN0YXR1cyA9IHt9O1xuICAgICAgICB2YWx1ZS5yZXN1bHQuc2hvdWxkLmVxbChbZXhwZWN0ZWRUaW1lb3V0cywgZXhwZWN0ZWRTdGF0dXNdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGZhaWwgd2l0aCBhbnkgc2NyaXB0IHR5cGUgb3RoZXIgdGhhbiB3ZWJkcml2ZXJpbyBjdXJyZW50bHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGByZXR1cm4gJ2ZvbydgO1xuICAgICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7c2Vzc2lvbklkfS9hcHBpdW0vZXhlY3V0ZV9kcml2ZXJgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHtzY3JpcHQsIHR5cGU6ICd3ZCd9LFxuICAgICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZDtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgYSB3ZWJkcml2ZXJpbyBzY3JpcHQgdGhhdCByZXR1cm5zIGVsZW1lbnRzIGNvcnJlY3RseScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gYFxuICAgICAgICAgIHJldHVybiBhd2FpdCBkcml2ZXIuJChcIn5hbWF6aW5nXCIpO1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCB7dmFsdWV9ID0gKGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YToge3NjcmlwdH0sXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICB2YWx1ZS5yZXN1bHQuc2hvdWxkLmVxbCh7XG4gICAgICAgICAgW1czQ19FTEVNRU5UX0tFWV06ICdlbGVtZW50LWlkLTEnLFxuICAgICAgICAgIFtNSlNPTldQX0VMRU1FTlRfS0VZXTogJ2VsZW1lbnQtaWQtMSdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIGEgd2ViZHJpdmVyaW8gc2NyaXB0IHRoYXQgcmV0dXJucyBlbGVtZW50cyBpbiBkZWVwIHN0cnVjdHVyZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gYFxuICAgICAgICAgIGNvbnN0IGVsID0gYXdhaXQgZHJpdmVyLiQoXCJ+YW1hemluZ1wiKTtcbiAgICAgICAgICByZXR1cm4ge2VsZW1lbnQ6IGVsLCBlbGVtZW50czogW2VsLCBlbF19O1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCB7dmFsdWV9ID0gKGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YToge3NjcmlwdH0sXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICBjb25zdCBlbE9iaiA9IHtcbiAgICAgICAgICBbVzNDX0VMRU1FTlRfS0VZXTogJ2VsZW1lbnQtaWQtMScsXG4gICAgICAgICAgW01KU09OV1BfRUxFTUVOVF9LRVldOiAnZWxlbWVudC1pZC0xJ1xuICAgICAgICB9O1xuICAgICAgICB2YWx1ZS5yZXN1bHQuc2hvdWxkLmVxbCh7ZWxlbWVudDogZWxPYmosIGVsZW1lbnRzOiBbZWxPYmosIGVsT2JqXX0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgc3RvcmUgYW5kIHJldHVybiBsb2dzIHRvIHRoZSB1c2VyJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgXG4gICAgICAgICAgY29uc29sZS5sb2coXCJmb29cIik7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJmb28yXCIpO1xuICAgICAgICAgIGNvbnNvbGUud2FybihcImJhclwiKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiYmF6XCIpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCB7dmFsdWV9ID0gKGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGBodHRwOi8vbG9jYWxob3N0OjgxODEvd2QvaHViL3Nlc3Npb24vJHtzZXNzaW9uSWR9L2FwcGl1bS9leGVjdXRlX2RyaXZlcmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YToge3NjcmlwdH0sXG4gICAgICAgIH0pKS5kYXRhO1xuICAgICAgICB2YWx1ZS5sb2dzLnNob3VsZC5lcWwoe2xvZzogWydmb28nLCAnZm9vMiddLCB3YXJuOiBbJ2JhciddLCBlcnJvcjogWydiYXonXX0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGF2ZSBhcHBpdW0gc3BlY2lmaWMgY29tbWFuZHMgYXZhaWxhYmxlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgXG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiBkcml2ZXIubG9jaztcbiAgICAgICAgYDtcbiAgICAgICAgY29uc3Qge3ZhbHVlfSA9IChhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7c2Vzc2lvbklkfS9hcHBpdW0vZXhlY3V0ZV9kcml2ZXJgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHtzY3JpcHR9LFxuICAgICAgICB9KSkuZGF0YTtcbiAgICAgICAgdmFsdWUucmVzdWx0LnNob3VsZC5lcWwoJ2Z1bmN0aW9uJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb3JyZWN0bHkgaGFuZGxlIGVycm9ycyB0aGF0IGhhcHBlbiBpbiBhIHdlYmRyaXZlcmlvIHNjcmlwdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gYFxuICAgICAgICAgIHJldHVybiBhd2FpdCBkcml2ZXIuJChcIn5ub3Rmb3VuZFwiKTtcbiAgICAgICAgYDtcbiAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgIHVybDogYGh0dHA6Ly9sb2NhbGhvc3Q6ODE4MS93ZC9odWIvc2Vzc2lvbi8ke3Nlc3Npb25JZH0vYXBwaXVtL2V4ZWN1dGVfZHJpdmVyYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgICBkYXRhOiB7c2NyaXB0fSxcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEuc2hvdWxkLmVxbCh7XG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgIHN0YXR1czogMTMsXG4gICAgICAgICAgdmFsdWU6IHttZXNzYWdlOiAnQW4gdW5rbm93biBzZXJ2ZXItc2lkZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nIHRoZSBjb21tYW5kLiBPcmlnaW5hbCBlcnJvcjogQ291bGQgbm90IGV4ZWN1dGUgZHJpdmVyIHNjcmlwdC4gT3JpZ2luYWwgZXJyb3Igd2FzOiBFcnJvcjogbm90IGZvdW5kJ31cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb3JyZWN0bHkgaGFuZGxlIGVycm9ycyB0aGF0IGhhcHBlbiB3aGVuIGEgc2NyaXB0IGNhbm5vdCBiZSBjb21waWxlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gYFxuICAgICAgICAgIHJldHVybiB7O1xuICAgICAgICBgO1xuICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7c2Vzc2lvbklkfS9hcHBpdW0vZXhlY3V0ZV9kcml2ZXJgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICAgIGRhdGE6IHtzY3JpcHR9LFxuICAgICAgICB9KTtcbiAgICAgICAgc2Vzc2lvbklkLnNob3VsZC5lcWwoZGF0YS5zZXNzaW9uSWQpO1xuICAgICAgICBkYXRhLnN0YXR1cy5zaG91bGQuZXFsKDEzKTtcbiAgICAgICAgZGF0YS52YWx1ZS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScpO1xuICAgICAgICBkYXRhLnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLm1hdGNoKC9BbiB1bmtub3duIHNlcnZlci1zaWRlIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlIGNvbW1hbmQuIE9yaWdpbmFsIGVycm9yOiBDb3VsZCBub3QgZXhlY3V0ZSBkcml2ZXIgc2NyaXB0LiBPcmlnaW5hbCBlcnJvciB3YXM6IEVycm9yOiBVbmV4cGVjdGVkIHRva2VuICc/Oyc/Lyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIHNldCBhIHRpbWVvdXQgb24gYSBkcml2ZXIgc2NyaXB0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBgXG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5kZWxheSgxMDAwKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgYDtcbiAgICAgICAgY29uc3Qge3ZhbHVlfSA9IChhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgaHR0cDovL2xvY2FsaG9zdDo4MTgxL3dkL2h1Yi9zZXNzaW9uLyR7c2Vzc2lvbklkfS9hcHBpdW0vZXhlY3V0ZV9kcml2ZXJgLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICAgIGRhdGE6IHtzY3JpcHQsIHRpbWVvdXQ6IDUwfSxcbiAgICAgICAgfSkpLmRhdGE7XG4gICAgICAgIHZhbHVlLm1lc3NhZ2Uuc2hvdWxkLm1hdGNoKC8uKzUwLit0aW1lb3V0LisvKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYmFzZURyaXZlckUyRVRlc3RzO1xuIl0sImZpbGUiOiJ0ZXN0L2Jhc2Vkcml2ZXIvZHJpdmVyLWUyZS10ZXN0cy5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
