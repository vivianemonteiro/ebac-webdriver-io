"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _chai = _interopRequireDefault(require("chai"));

var _path = _interopRequireDefault(require("path"));

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _sinon = _interopRequireDefault(require("sinon"));

var _ = require("../../..");

var _find = require("../../../lib/basedriver/commands/find");

var _appiumSupport = require("appium-support");

const should = _chai.default.should();

_chai.default.use(_chaiAsPromised.default);

class TestDriver extends _.BaseDriver {
  async getWindowSize() {}

  async getScreenshot() {}

}

const CUSTOM_FIND_MODULE = _path.default.resolve(__dirname, '..', '..', '..', '..', 'test', 'basedriver', 'fixtures', 'custom-element-finder');

const BAD_CUSTOM_FIND_MODULE = _path.default.resolve(__dirname, '..', '..', '..', '..', 'test', 'basedriver', 'fixtures', 'custom-element-finder-bad');

const TINY_PNG = 'iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0NDMDM4MDM4N0U2MTFFOEEzMzhGMTRFNUUwNzIwNUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0NDMDM4MDQ4N0U2MTFFOEEzMzhGMTRFNUUwNzIwNUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3Q0MwMzgwMTg3RTYxMUU4QTMzOEYxNEU1RTA3MjA1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3Q0MwMzgwMjg3RTYxMUU4QTMzOEYxNEU1RTA3MjA1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpdvJjQAAAAlSURBVHjaJInBEQAACIKw/Xe2Ul5wYBtwmJqkk4+zfvUQVoABAEg0EfrZwc0hAAAAAElFTkSuQmCC';
const TINY_PNG_DIMS = [4, 4];
describe('finding elements by image', function () {
  describe('findElement', function () {
    it('should use a different special method to find element by image', async function () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'findByImage').returns(true);

      _sinon.default.stub(d, 'findElOrElsWithProcessing').returns(false);

      await d.findElement(_find.IMAGE_STRATEGY, 'foo').should.eventually.be.true;
      await d.findElements(_find.IMAGE_STRATEGY, 'foo').should.eventually.be.true;
    });
    it('should not be able to find image element from any other element', async function () {
      const d = new TestDriver();
      await d.findElementFromElement(_find.IMAGE_STRATEGY, 'foo', 'elId').should.eventually.be.rejectedWith(/Locator Strategy.+is not supported/);
      await d.findElementsFromElement(_find.IMAGE_STRATEGY, 'foo', 'elId').should.eventually.be.rejectedWith(/Locator Strategy.+is not supported/);
    });
  });
  describe('findByImage', function () {
    const rect = {
      x: 10,
      y: 20,
      width: 30,
      height: 40
    };
    const score = 0.9;
    const size = {
      width: 100,
      height: 200
    };
    const screenshot = 'iVBORfoo';
    const template = 'iVBORbar';

    function basicStub(driver) {
      const sizeStub = _sinon.default.stub(driver, 'getWindowSize').returns(size);

      const screenStub = _sinon.default.stub(driver, 'getScreenshotForImageFind').returns(screenshot);

      const compareStub = _sinon.default.stub(driver, 'compareImages').returns({
        rect,
        score
      });

      return {
        sizeStub,
        screenStub,
        compareStub
      };
    }

    function basicImgElVerify(imgElProto, driver) {
      const imgElId = imgElProto.ELEMENT;
      driver._imgElCache.has(imgElId).should.be.true;

      const imgEl = driver._imgElCache.get(imgElId);

      (imgEl instanceof _.ImageElement).should.be.true;
      imgEl.rect.should.eql(rect);
      imgEl.score.should.eql(score);
      return imgEl;
    }

    it('should find an image element happypath', async function () {
      const d = new TestDriver();
      basicStub(d);
      const imgElProto = await d.findByImage(template, {
        multiple: false
      });
      basicImgElVerify(imgElProto, d);
    });
    it('should find image elements happypath', async function () {
      const d = new TestDriver();
      const {
        compareStub
      } = basicStub(d);
      compareStub.returns([{
        rect,
        score
      }]);
      const els = await d.findByImage(template, {
        multiple: true
      });
      els.should.have.length(1);
      basicImgElVerify(els[0], d);
    });
    it('should fail if driver does not support getWindowSize', async function () {
      const d = new _.BaseDriver();
      await d.findByImage(template, {
        multiple: false
      }).should.eventually.be.rejectedWith(/driver does not support/);
    });
    it('should fix template size if requested', async function () {
      const d = new TestDriver();
      const newTemplate = 'iVBORbaz';
      const {
        compareStub
      } = basicStub(d);
      await d.settings.update({
        fixImageTemplateSize: true
      });

      _sinon.default.stub(d, 'ensureTemplateSize').returns(newTemplate);

      const imgElProto = await d.findByImage(template, {
        multiple: false
      });
      const imgEl = basicImgElVerify(imgElProto, d);
      imgEl.template.should.eql(newTemplate);
      compareStub.args[0][2].should.eql(newTemplate);
    });
    it('should fix template size scale if requested', async function () {
      const d = new TestDriver();
      const newTemplate = 'iVBORbaz';
      const {
        compareStub
      } = basicStub(d);
      await d.settings.update({
        fixImageTemplateScale: true
      });

      _sinon.default.stub(d, 'fixImageTemplateScale').returns(newTemplate);

      const imgElProto = await d.findByImage(template, {
        multiple: false
      });
      const imgEl = basicImgElVerify(imgElProto, d);
      imgEl.template.should.eql(newTemplate);
      compareStub.args[0][2].should.eql(newTemplate);
    });
    it('should not fix template size scale if it is not requested', async function () {
      const d = new TestDriver();
      const newTemplate = 'iVBORbaz';
      basicStub(d);
      await d.settings.update({});

      _sinon.default.stub(d, 'fixImageTemplateScale').returns(newTemplate);

      d.fixImageTemplateScale.callCount.should.eql(0);
    });
    it('should throw an error if template match fails', async function () {
      const d = new TestDriver();
      const {
        compareStub
      } = basicStub(d);
      compareStub.throws(new Error('Cannot find any occurrences'));
      await d.findByImage(template, {
        multiple: false
      }).should.eventually.be.rejectedWith(/element could not be located/);
    });
    it('should return empty array for multiple elements if template match fails', async function () {
      const d = new TestDriver();
      const {
        compareStub
      } = basicStub(d);
      compareStub.throws(new Error('Cannot find any occurrences'));
      await d.findByImage(template, {
        multiple: true
      }).should.eventually.eql([]);
    });
    it('should respect implicit wait', async function () {
      const d = new TestDriver();
      d.setImplicitWait(10);
      const {
        compareStub
      } = basicStub(d);
      compareStub.onCall(0).throws(new Error('Cannot find any occurrences'));
      const imgElProto = await d.findByImage(template, {
        multiple: false
      });
      basicImgElVerify(imgElProto, d);
      compareStub.callCount.should.eql(2);
    });
    it('should not add element to cache and return it directly when checking staleness', async function () {
      const d = new TestDriver();
      basicStub(d);
      const imgEl = await d.findByImage(template, {
        multiple: false,
        shouldCheckStaleness: true
      });
      (imgEl instanceof _.ImageElement).should.be.true;
      d._imgElCache.has(imgEl.id).should.be.false;
      imgEl.rect.should.eql(rect);
    });
  });
  describe('fixImageTemplateScale', function () {
    it('should not fix template size scale if no scale value', async function () {
      const newTemplate = 'iVBORbaz';
      await _find.helpers.fixImageTemplateScale(newTemplate, {
        fixImageTemplateScale: true
      }).should.eventually.eql(newTemplate);
    });
    it('should not fix template size scale if it is null', async function () {
      const newTemplate = 'iVBORbaz';
      await _find.helpers.fixImageTemplateScale(newTemplate, null).should.eventually.eql(newTemplate);
    });
    it('should not fix template size scale if it is not number', async function () {
      const newTemplate = 'iVBORbaz';
      await _find.helpers.fixImageTemplateScale(newTemplate, 'wrong-scale').should.eventually.eql(newTemplate);
    });
    it('should fix template size scale', async function () {
      const actual = 'iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAWElEQVR4AU3BQRWAQAhAwa/PGBsEgrC16AFBKEIPXW7OXO+Rmey9iQjMjHFzrLUwM7qbqmLcHKpKRFBVuDvj4agq3B1VRUQYT2bS3QwRQVUZF/CaGRHB3wc1vSZbHO5+BgAAAABJRU5ErkJggg==';
      await _find.helpers.fixImageTemplateScale(TINY_PNG, {
        fixImageTemplateScale: true,
        xScale: 1.5,
        yScale: 1.5
      }).should.eventually.eql(actual);
    });
    it('should not fix template size scale because of fixImageTemplateScale is false', async function () {
      await _find.helpers.fixImageTemplateScale(TINY_PNG, {
        fixImageTemplateScale: false,
        xScale: 1.5,
        yScale: 1.5
      }).should.eventually.eql(TINY_PNG);
    });
    it('should fix template size scale with default scale', async function () {
      const actual = 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABwUlEQVR4AaXBPUsrQQCG0SeX+cBdkTjwTpG1NPgLpjY/fW1stt4UYmm2cJqwMCsaw70uJJ3CBc9Z/P3Cl+12S9u2tG1L27bEGLm/v2ez2bDZbJDEd/7wS4YT7z3X19fc3Nxwd3dHXdd47xnHkefnZ8ZxpKoq6rqmqiqMMcwMJ1VV0TQN0zThnOPj44O6rsk503UdkmiahqZpWK1WGGOYGU7quqZpGqy1SCLnTM6Z19dXcs5IYpomrLVI4uLigpnhpKoqVqsVkjgcDjw9PdF1HTlnuq5DEs45JHE4HDgznByPR97e3pimiVIK4zhyPB7x3hNCIITA5eUl3nsWiwVnhpNSCsMwsNvtGIaB/X5PKQVJpJSQxHq9RhLOOc4MJ9M0sdvt2G639H3PTBIxRiQhCUnEGLHWcmY4KaUwDAN93/P4+MhyuSSlhCRSSkjCOYe1FmstZ6bve2YvLy/s93tmy+USSUhCEpIIIfAd8/DwwOz9/Z1SCpJIKSGJ9XqNJJxz/MS0bcvs6uoKScQYkYQkJBFjxFrLT0zbtsxub29JKSGJlBKScM5hrcVay09MzplZjJHPz0+894QQCCHwP/7wS/8A4e6nAg+R8LwAAAAASUVORK5CYII=';
      await _find.helpers.fixImageTemplateScale(TINY_PNG, {
        defaultImageTemplateScale: 4.0
      }).should.eventually.eql(actual);
    });
    it('should fix template size scale with default scale and image scale', async function () {
      const actual = 'iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAACaUlEQVR4AbXBMWvrWBSF0c9BsFPtW91UR1U6+///FKlKKt8qqnyqnMozggkI8xgMj6x1uv+L/6zryrIsrOvKsiys68qyLFwuF87nM5fLhfP5zOVy4Xw+84wXftkLv2ziQBK26b0TEVQVu4jANrvM5Hq9spOEJCQhCUlI4mjiQBK26b1TVewkYRvb7DKTMQaZiW1s01rDNraRxNHEgSRaa1QVO0m01jjKTDKTXe+d3jtVxU4SjyYOJGGbnSRs03snM8lMMpPb7UZmkplEBFXFThK2eTRxIAnbSMI2VcX39zdjDMYYZCaZyRiDMQZVxU4StqkqHk0cSEISf5KZ7DKTMQbLsrCTRGuN3jtVxaOJg6qiqqgqqoqqoqoYY5CZ7GwTEdzvd97f34kIeu/YRhKPJg6qiswkM7ndbmQmmUlmkpnsbBMR2CYimOeZ3ju2kcSjiYOqIjP5+vpi2za2bWPbNo5aa7TW2PXe6b3Te6e1hiQeTRxUFbfbjW3bGGNwvV4ZY2Ab27TWsI1tbGMb27TWsI0kHk0cVBWZybZtXK9XPj8/+fj4YJ5nIoLWGraJCOZ5RhKSkIQkJPFo4qCqyEy2bWOMwefnJ+u6cjqdsM3ONvM8cz6feca0ris/rtcrmcnONhHB/X7n/f2diKD3jm0k8axpWRZ+ZCaZyc42EYFtIoJ5num9YxtJPGta15U/sY1tdm9vb/Te6b1jG0k8a1qWhR+2sU1rjdYatrGNbWxjm9YaknjWtK4rPyKCiKC1hm0igojg9fUVSUhCEpJ41rQsC0e22dkmIrhcLvyNF/7H6XTib73wy174Zf8AJEsePtlPj10AAAAASUVORK5CYII=';
      await _find.helpers.fixImageTemplateScale(TINY_PNG, {
        defaultImageTemplateScale: 4.0,
        fixImageTemplateScale: true,
        xScale: 1.5,
        yScale: 1.5
      }).should.eventually.eql(actual);
    });
    it('should not fix template size scale with default scale and image scale', async function () {
      const actual = 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABwUlEQVR4AaXBPUsrQQCG0SeX+cBdkTjwTpG1NPgLpjY/fW1stt4UYmm2cJqwMCsaw70uJJ3CBc9Z/P3Cl+12S9u2tG1L27bEGLm/v2ez2bDZbJDEd/7wS4YT7z3X19fc3Nxwd3dHXdd47xnHkefnZ8ZxpKoq6rqmqiqMMcwMJ1VV0TQN0zThnOPj44O6rsk503UdkmiahqZpWK1WGGOYGU7quqZpGqy1SCLnTM6Z19dXcs5IYpomrLVI4uLigpnhpKoqVqsVkjgcDjw9PdF1HTlnuq5DEs45JHE4HDgznByPR97e3pimiVIK4zhyPB7x3hNCIITA5eUl3nsWiwVnhpNSCsMwsNvtGIaB/X5PKQVJpJSQxHq9RhLOOc4MJ9M0sdvt2G639H3PTBIxRiQhCUnEGLHWcmY4KaUwDAN93/P4+MhyuSSlhCRSSkjCOYe1FmstZ6bve2YvLy/s93tmy+USSUhCEpIIIfAd8/DwwOz9/Z1SCpJIKSGJ9XqNJJxz/MS0bcvs6uoKScQYkYQkJBFjxFrLT0zbtsxub29JKSGJlBKScM5hrcVay09MzplZjJHPz0+894QQCCHwP/7wS/8A4e6nAg+R8LwAAAAASUVORK5CYII=';
      await _find.helpers.fixImageTemplateScale(TINY_PNG, {
        defaultImageTemplateScale: 4.0,
        fixImageTemplateScale: false,
        xScale: 1.5,
        yScale: 1.5
      }).should.eventually.eql(actual);
    });
    it('should not fix template size scale because of ignoreDefaultImageTemplateScale', async function () {
      await _find.helpers.fixImageTemplateScale(TINY_PNG, {
        defaultImageTemplateScale: 4.0,
        ignoreDefaultImageTemplateScale: true
      }).should.eventually.eql(TINY_PNG);
    });
    it('should ignore defaultImageTemplateScale to fix template size scale because of ignoreDefaultImageTemplateScale', async function () {
      const actual = 'iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAWElEQVR4AU3BQRWAQAhAwa/PGBsEgrC16AFBKEIPXW7OXO+Rmey9iQjMjHFzrLUwM7qbqmLcHKpKRFBVuDvj4agq3B1VRUQYT2bS3QwRQVUZF/CaGRHB3wc1vSZbHO5+BgAAAABJRU5ErkJggg==';
      await _find.helpers.fixImageTemplateScale(TINY_PNG, {
        defaultImageTemplateScale: 4.0,
        ignoreDefaultImageTemplateScale: true,
        fixImageTemplateScale: true,
        xScale: 1.5,
        yScale: 1.5
      }).should.eventually.eql(actual);
    });
  });
  describe('ensureTemplateSize', function () {
    it('should not resize the template if it is smaller than the screen', async function () {
      const screen = TINY_PNG_DIMS.map(n => n * 2);
      const d = new TestDriver();
      await d.ensureTemplateSize(TINY_PNG, ...screen).should.eventually.eql(TINY_PNG);
    });
    it('should not resize the template if it is the same size as the screen', async function () {
      const d = new TestDriver();
      await d.ensureTemplateSize(TINY_PNG, ...TINY_PNG_DIMS).should.eventually.eql(TINY_PNG);
    });
    it('should resize the template if it is bigger than the screen', async function () {
      const d = new TestDriver();
      const screen = TINY_PNG_DIMS.map(n => n / 2);
      const newTemplate = await d.ensureTemplateSize(TINY_PNG, ...screen);
      newTemplate.should.not.eql(TINY_PNG);
      newTemplate.length.should.be.below(TINY_PNG.length);
    });
  });
  describe('getScreenshotForImageFind', function () {
    it('should fail if driver does not support getScreenshot', async function () {
      const d = new _.BaseDriver();
      await d.getScreenshotForImageFind().should.eventually.be.rejectedWith(/driver does not support/);
    });
    it('should not adjust or verify screenshot if asked not to by settings', async function () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      d.settings.update({
        fixImageFindScreenshotDims: false
      });
      const screen = TINY_PNG_DIMS.map(n => n + 1);
      const {
        b64Screenshot,
        scale
      } = await d.getScreenshotForImageFind(...screen);
      b64Screenshot.should.eql(TINY_PNG);
      should.equal(scale, undefined);
    });
    it('should return screenshot without adjustment if it matches screen size', async function () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      const {
        b64Screenshot,
        scale
      } = await d.getScreenshotForImageFind(...TINY_PNG_DIMS);
      b64Screenshot.should.eql(TINY_PNG);
      should.equal(scale, undefined);
    });
    it('should return scaled screenshot with same aspect ratio if matching screen aspect ratio', async function () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      const screen = TINY_PNG_DIMS.map(n => n * 1.5);
      const {
        b64Screenshot,
        scale
      } = await d.getScreenshotForImageFind(...screen);
      b64Screenshot.should.not.eql(TINY_PNG);
      const screenshotObj = await _appiumSupport.imageUtil.getJimpImage(b64Screenshot);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
      scale.should.eql({
        xScale: 1.5,
        yScale: 1.5
      });
    });
    it('should return scaled screenshot with different aspect ratio if not matching screen aspect ratio', async function () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      let screen = [TINY_PNG_DIMS[0] * 2, TINY_PNG_DIMS[1] * 3];
      let expectedScale = {
        xScale: 2.67,
        yScale: 4
      };
      const {
        b64Screenshot,
        scale
      } = await d.getScreenshotForImageFind(...screen);
      b64Screenshot.should.not.eql(TINY_PNG);
      let screenshotObj = await _appiumSupport.imageUtil.getJimpImage(b64Screenshot);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
      scale.xScale.toFixed(2).should.eql(expectedScale.xScale.toString());
      scale.yScale.should.eql(expectedScale.yScale);
      screen = [TINY_PNG_DIMS[0] * 3, TINY_PNG_DIMS[1] * 2];
      expectedScale = {
        xScale: 4,
        yScale: 2.67
      };
      const {
        b64Screenshot: newScreen,
        scale: newScale
      } = await d.getScreenshotForImageFind(...screen);
      newScreen.should.not.eql(TINY_PNG);
      screenshotObj = await _appiumSupport.imageUtil.getJimpImage(newScreen);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
      newScale.xScale.should.eql(expectedScale.xScale);
      newScale.yScale.toFixed(2).should.eql(expectedScale.yScale.toString());
    });
    it('should return scaled screenshot with different aspect ratio if not matching screen aspect ratio with fixImageTemplateScale', async function () {
      const d = new TestDriver();

      _sinon.default.stub(d, 'getScreenshot').returns(TINY_PNG);

      let screen = [TINY_PNG_DIMS[0] * 2, TINY_PNG_DIMS[1] * 3];
      let expectedScale = {
        xScale: 2.67,
        yScale: 4
      };
      const {
        b64Screenshot,
        scale
      } = await d.getScreenshotForImageFind(...screen);
      b64Screenshot.should.not.eql(TINY_PNG);
      let screenshotObj = await _appiumSupport.imageUtil.getJimpImage(b64Screenshot);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
      scale.xScale.toFixed(2).should.eql(expectedScale.xScale.toString());
      scale.yScale.should.eql(expectedScale.yScale);
      await _find.helpers.fixImageTemplateScale(b64Screenshot, {
        fixImageTemplateScale: true,
        scale
      }).should.eventually.eql('iVBORw0KGgoAAAANSUhEUgAAAAgAAAAMCAYAAABfnvydAAAAJ0lEQVR4AYXBAQEAIACDMKR/p0fTBrKdbZcPCRIkSJAgQYIECRIkPAzBA1TpeNwZAAAAAElFTkSuQmCC');
      screen = [TINY_PNG_DIMS[0] * 3, TINY_PNG_DIMS[1] * 2];
      expectedScale = {
        xScale: 4,
        yScale: 2.67
      };
      const {
        b64Screenshot: newScreen,
        scale: newScale
      } = await d.getScreenshotForImageFind(...screen);
      newScreen.should.not.eql(TINY_PNG);
      screenshotObj = await _appiumSupport.imageUtil.getJimpImage(newScreen);
      screenshotObj.bitmap.width.should.eql(screen[0]);
      screenshotObj.bitmap.height.should.eql(screen[1]);
      newScale.xScale.should.eql(expectedScale.xScale);
      newScale.yScale.toFixed(2).should.eql(expectedScale.yScale.toString());
      await _find.helpers.fixImageTemplateScale(newScreen, {
        fixImageTemplateScale: true,
        scale
      }).should.eventually.eql('iVBORw0KGgoAAAANSUhEUgAAAAwAAAAICAYAAADN5B7xAAAAI0lEQVR4AZXBAQEAMAyDMI5/T5W2ayB5245AIokkkkgiiST6+W4DTLyo5PUAAAAASUVORK5CYII=');
    });
  });
});
describe('custom element finding plugins', function () {
  it('should find a single element using a custom finder', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:foo').should.eventually.eql('bar');
  });
  it('should not require selector prefix if only one find plugin is registered', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'foo').should.eventually.eql('bar');
  });
  it('should find multiple elements using a custom finder', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    await d.findElements(_find.CUSTOM_STRATEGY, 'f:foos').should.eventually.eql(['baz1', 'baz2']);
  });
  it('should give a hint to the plugin about whether multiple are requested', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:foos').should.eventually.eql('bar1');
  });
  it('should be able to use multiple find modules', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE,
      g: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:foo').should.eventually.eql('bar');
    await d.findElement(_find.CUSTOM_STRATEGY, 'g:foo').should.eventually.eql('bar');
  });
  it('should throw an error if customFindModules is not set', async function () {
    const d = new _.BaseDriver();
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:foo').should.eventually.be.rejectedWith(/customFindModules/);
  });
  it('should throw an error if customFindModules is the wrong shape', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = CUSTOM_FIND_MODULE;
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:foo').should.eventually.be.rejectedWith(/customFindModules/);
  });
  it('should throw an error if customFindModules is size > 1 and no selector prefix is used', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE,
      g: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'foo').should.eventually.be.rejectedWith(/multiple element finding/i);
  });
  it('should throw an error in attempt to use unregistered plugin', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE,
      g: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'z:foo').should.eventually.be.rejectedWith(/was not registered/);
  });
  it('should throw an error if plugin cannot be loaded', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: './foo.js'
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:foo').should.eventually.be.rejectedWith(/could not load/i);
  });
  it('should throw an error if plugin is not the right shape', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: BAD_CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:foo').should.eventually.be.rejectedWith(/constructed correctly/i);
  });
  it('should pass on an error thrown by the finder itself', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:error').should.eventually.be.rejectedWith(/plugin error/i);
  });
  it('should throw no such element error if element not found', async function () {
    const d = new _.BaseDriver();
    d.opts.customFindModules = {
      f: CUSTOM_FIND_MODULE
    };
    await d.findElement(_find.CUSTOM_STRATEGY, 'f:nope').should.eventually.be.rejectedWith(/could not be located/);
  });
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYmFzZWRyaXZlci9jb21tYW5kcy9maW5kLXNwZWNzLmpzIl0sIm5hbWVzIjpbInNob3VsZCIsImNoYWkiLCJ1c2UiLCJjaGFpQXNQcm9taXNlZCIsIlRlc3REcml2ZXIiLCJCYXNlRHJpdmVyIiwiZ2V0V2luZG93U2l6ZSIsImdldFNjcmVlbnNob3QiLCJDVVNUT01fRklORF9NT0RVTEUiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIkJBRF9DVVNUT01fRklORF9NT0RVTEUiLCJUSU5ZX1BORyIsIlRJTllfUE5HX0RJTVMiLCJkZXNjcmliZSIsIml0IiwiZCIsInNpbm9uIiwic3R1YiIsInJldHVybnMiLCJmaW5kRWxlbWVudCIsIklNQUdFX1NUUkFURUdZIiwiZXZlbnR1YWxseSIsImJlIiwidHJ1ZSIsImZpbmRFbGVtZW50cyIsImZpbmRFbGVtZW50RnJvbUVsZW1lbnQiLCJyZWplY3RlZFdpdGgiLCJmaW5kRWxlbWVudHNGcm9tRWxlbWVudCIsInJlY3QiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0Iiwic2NvcmUiLCJzaXplIiwic2NyZWVuc2hvdCIsInRlbXBsYXRlIiwiYmFzaWNTdHViIiwiZHJpdmVyIiwic2l6ZVN0dWIiLCJzY3JlZW5TdHViIiwiY29tcGFyZVN0dWIiLCJiYXNpY0ltZ0VsVmVyaWZ5IiwiaW1nRWxQcm90byIsImltZ0VsSWQiLCJFTEVNRU5UIiwiX2ltZ0VsQ2FjaGUiLCJoYXMiLCJpbWdFbCIsImdldCIsIkltYWdlRWxlbWVudCIsImVxbCIsImZpbmRCeUltYWdlIiwibXVsdGlwbGUiLCJlbHMiLCJoYXZlIiwibGVuZ3RoIiwibmV3VGVtcGxhdGUiLCJzZXR0aW5ncyIsInVwZGF0ZSIsImZpeEltYWdlVGVtcGxhdGVTaXplIiwiYXJncyIsImZpeEltYWdlVGVtcGxhdGVTY2FsZSIsImNhbGxDb3VudCIsInRocm93cyIsIkVycm9yIiwic2V0SW1wbGljaXRXYWl0Iiwib25DYWxsIiwic2hvdWxkQ2hlY2tTdGFsZW5lc3MiLCJpZCIsImZhbHNlIiwiaGVscGVycyIsImFjdHVhbCIsInhTY2FsZSIsInlTY2FsZSIsImRlZmF1bHRJbWFnZVRlbXBsYXRlU2NhbGUiLCJpZ25vcmVEZWZhdWx0SW1hZ2VUZW1wbGF0ZVNjYWxlIiwic2NyZWVuIiwibWFwIiwibiIsImVuc3VyZVRlbXBsYXRlU2l6ZSIsIm5vdCIsImJlbG93IiwiZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCIsImZpeEltYWdlRmluZFNjcmVlbnNob3REaW1zIiwiYjY0U2NyZWVuc2hvdCIsInNjYWxlIiwiZXF1YWwiLCJ1bmRlZmluZWQiLCJzY3JlZW5zaG90T2JqIiwiaW1hZ2VVdGlsIiwiZ2V0SmltcEltYWdlIiwiYml0bWFwIiwiZXhwZWN0ZWRTY2FsZSIsInRvRml4ZWQiLCJ0b1N0cmluZyIsIm5ld1NjcmVlbiIsIm5ld1NjYWxlIiwib3B0cyIsImN1c3RvbUZpbmRNb2R1bGVzIiwiZiIsIkNVU1RPTV9TVFJBVEVHWSIsImciXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBLE1BQU1BLE1BQU0sR0FBR0MsY0FBS0QsTUFBTCxFQUFmOztBQUNBQyxjQUFLQyxHQUFMLENBQVNDLHVCQUFUOztBQUdBLE1BQU1DLFVBQU4sU0FBeUJDLFlBQXpCLENBQW9DO0FBQ2xDLFFBQU1DLGFBQU4sR0FBdUIsQ0FBRTs7QUFDekIsUUFBTUMsYUFBTixHQUF1QixDQUFFOztBQUZTOztBQUtwQyxNQUFNQyxrQkFBa0IsR0FBR0MsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLElBQXhCLEVBQThCLElBQTlCLEVBQW9DLElBQXBDLEVBQTBDLElBQTFDLEVBQ3pCLE1BRHlCLEVBQ2pCLFlBRGlCLEVBQ0gsVUFERyxFQUNTLHVCQURULENBQTNCOztBQUVBLE1BQU1DLHNCQUFzQixHQUFHSCxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsSUFBeEIsRUFBOEIsSUFBOUIsRUFBb0MsSUFBcEMsRUFB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QUFDLENBQUNJLFdBQUYsQ0FBY2tGLHFCQUFkLEVBQStCLFNBQS9CLEVBQTBDdkcsTUFBMUMsQ0FBaUR1QixVQUFqRCxDQUE0REMsRUFBNUQsQ0FBK0RJLFlBQS9ELENBQTRFLGVBQTVFLENBQU47QUFDRCxHQUpDLENBQUY7QUFLQVosRUFBQUEsRUFBRSxDQUFDLHlEQUFELEVBQTRELGtCQUFrQjtBQUM5RSxVQUFNQyxDQUFDLEdBQUcsSUFBSVosWUFBSixFQUFWO0FBQ0FZLElBQUFBLENBQUMsQ0FBQ21GLElBQUYsQ0FBT0MsaUJBQVAsR0FBMkI7QUFBQ0MsTUFBQUEsQ0FBQyxFQUFFOUY7QUFBSixLQUEzQjtBQUNBLFVBQU1TLENBQUMsQ0FBQ0ksV0FBRixDQUFja0YscUJBQWQsRUFBK0IsUUFBL0IsRUFBeUN2RyxNQUF6QyxDQUFnRHVCLFVBQWhELENBQTJEQyxFQUEzRCxDQUE4REksWUFBOUQsQ0FBMkUsc0JBQTNFLENBQU47QUFDRCxHQUpDLENBQUY7QUFLRCxDQXJFTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCBzaW5vbiBmcm9tICdzaW5vbic7XG5pbXBvcnQgeyBCYXNlRHJpdmVyLCBJbWFnZUVsZW1lbnQgfSBmcm9tICcuLi8uLi8uLic7XG5pbXBvcnQgeyBJTUFHRV9TVFJBVEVHWSwgQ1VTVE9NX1NUUkFURUdZLCBoZWxwZXJzIH0gZnJvbSAnLi4vLi4vLi4vbGliL2Jhc2Vkcml2ZXIvY29tbWFuZHMvZmluZCc7XG5pbXBvcnQgeyBpbWFnZVV0aWwgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5cblxuY29uc3Qgc2hvdWxkID0gY2hhaS5zaG91bGQoKTtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxuXG5jbGFzcyBUZXN0RHJpdmVyIGV4dGVuZHMgQmFzZURyaXZlciB7XG4gIGFzeW5jIGdldFdpbmRvd1NpemUgKCkge31cbiAgYXN5bmMgZ2V0U2NyZWVuc2hvdCAoKSB7fVxufVxuXG5jb25zdCBDVVNUT01fRklORF9NT0RVTEUgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4nLCAnLi4nLCAnLi4nLCAnLi4nLFxuICAndGVzdCcsICdiYXNlZHJpdmVyJywgJ2ZpeHR1cmVzJywgJ2N1c3RvbS1lbGVtZW50LWZpbmRlcicpO1xuY29uc3QgQkFEX0NVU1RPTV9GSU5EX01PRFVMRSA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLicsICcuLicsICcuLicsICcuLicsXG4gICd0ZXN0JywgJ2Jhc2Vkcml2ZXInLCAnZml4dHVyZXMnLCAnY3VzdG9tLWVsZW1lbnQtZmluZGVyLWJhZCcpO1xuXG5jb25zdCBUSU5ZX1BORyA9ICdpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQVFBQUFBRUNBSUFBQUFta3drcEFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeWhwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVOaTFqTVRRd0lEYzVMakUyTURRMU1Td2dNakF4Tnk4d05TOHdOaTB3TVRvd09Eb3lNU0FnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5ESURJd01UZ2dLRTFoWTJsdWRHOXphQ2tpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TjBORE1ETTRNRE00TjBVMk1URkZPRUV6TXpoR01UUkZOVVV3TnpJd05VSWlJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZOME5ETURNNE1EUTROMFUyTVRGRk9FRXpNemhHTVRSRk5VVXdOekl3TlVJaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEbzNRME13TXpnd01UZzNSVFl4TVVVNFFUTXpPRVl4TkVVMVJUQTNNakExUWlJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvM1EwTXdNemd3TWpnM1JUWXhNVVU0UVRNek9FWXhORVUxUlRBM01qQTFRaUl2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUHBkdkpqUUFBQUFsU1VSQlZIamFKSW5CRVFBQUNJS3cvWGUyVWw1d1lCdHdtSnFrazQremZ2VVFWb0FCQUVnMEVmclp3YzBoQUFBQUFFbEZUa1N1UW1DQyc7XG5jb25zdCBUSU5ZX1BOR19ESU1TID0gWzQsIDRdO1xuXG5kZXNjcmliZSgnZmluZGluZyBlbGVtZW50cyBieSBpbWFnZScsIGZ1bmN0aW9uICgpIHtcbiAgZGVzY3JpYmUoJ2ZpbmRFbGVtZW50JywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgdXNlIGEgZGlmZmVyZW50IHNwZWNpYWwgbWV0aG9kIHRvIGZpbmQgZWxlbWVudCBieSBpbWFnZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgc2lub24uc3R1YihkLCAnZmluZEJ5SW1hZ2UnKS5yZXR1cm5zKHRydWUpO1xuICAgICAgc2lub24uc3R1YihkLCAnZmluZEVsT3JFbHNXaXRoUHJvY2Vzc2luZycpLnJldHVybnMoZmFsc2UpO1xuICAgICAgYXdhaXQgZC5maW5kRWxlbWVudChJTUFHRV9TVFJBVEVHWSwgJ2ZvbycpLnNob3VsZC5ldmVudHVhbGx5LmJlLnRydWU7XG4gICAgICBhd2FpdCBkLmZpbmRFbGVtZW50cyhJTUFHRV9TVFJBVEVHWSwgJ2ZvbycpLnNob3VsZC5ldmVudHVhbGx5LmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgYmUgYWJsZSB0byBmaW5kIGltYWdlIGVsZW1lbnQgZnJvbSBhbnkgb3RoZXIgZWxlbWVudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgYXdhaXQgZC5maW5kRWxlbWVudEZyb21FbGVtZW50KElNQUdFX1NUUkFURUdZLCAnZm9vJywgJ2VsSWQnKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9Mb2NhdG9yIFN0cmF0ZWd5LitpcyBub3Qgc3VwcG9ydGVkLyk7XG4gICAgICBhd2FpdCBkLmZpbmRFbGVtZW50c0Zyb21FbGVtZW50KElNQUdFX1NUUkFURUdZLCAnZm9vJywgJ2VsSWQnKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9Mb2NhdG9yIFN0cmF0ZWd5LitpcyBub3Qgc3VwcG9ydGVkLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaW5kQnlJbWFnZScsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCByZWN0ID0ge3g6IDEwLCB5OiAyMCwgd2lkdGg6IDMwLCBoZWlnaHQ6IDQwfTtcbiAgICBjb25zdCBzY29yZSA9IDAuOTtcbiAgICBjb25zdCBzaXplID0ge3dpZHRoOiAxMDAsIGhlaWdodDogMjAwfTtcbiAgICBjb25zdCBzY3JlZW5zaG90ID0gJ2lWQk9SZm9vJztcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdpVkJPUmJhcic7XG5cbiAgICBmdW5jdGlvbiBiYXNpY1N0dWIgKGRyaXZlcikge1xuICAgICAgY29uc3Qgc2l6ZVN0dWIgPSBzaW5vbi5zdHViKGRyaXZlciwgJ2dldFdpbmRvd1NpemUnKS5yZXR1cm5zKHNpemUpO1xuICAgICAgY29uc3Qgc2NyZWVuU3R1YiA9IHNpbm9uLnN0dWIoZHJpdmVyLCAnZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCcpLnJldHVybnMoc2NyZWVuc2hvdCk7XG4gICAgICBjb25zdCBjb21wYXJlU3R1YiA9IHNpbm9uLnN0dWIoZHJpdmVyLCAnY29tcGFyZUltYWdlcycpLnJldHVybnMoe3JlY3QsIHNjb3JlfSk7XG4gICAgICByZXR1cm4ge3NpemVTdHViLCBzY3JlZW5TdHViLCBjb21wYXJlU3R1Yn07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYmFzaWNJbWdFbFZlcmlmeSAoaW1nRWxQcm90bywgZHJpdmVyKSB7XG4gICAgICBjb25zdCBpbWdFbElkID0gaW1nRWxQcm90by5FTEVNRU5UO1xuICAgICAgZHJpdmVyLl9pbWdFbENhY2hlLmhhcyhpbWdFbElkKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGNvbnN0IGltZ0VsID0gZHJpdmVyLl9pbWdFbENhY2hlLmdldChpbWdFbElkKTtcbiAgICAgIChpbWdFbCBpbnN0YW5jZW9mIEltYWdlRWxlbWVudCkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBpbWdFbC5yZWN0LnNob3VsZC5lcWwocmVjdCk7XG4gICAgICBpbWdFbC5zY29yZS5zaG91bGQuZXFsKHNjb3JlKTtcbiAgICAgIHJldHVybiBpbWdFbDtcbiAgICB9XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgYW4gaW1hZ2UgZWxlbWVudCBoYXBweXBhdGgnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGJhc2ljU3R1YihkKTtcbiAgICAgIGNvbnN0IGltZ0VsUHJvdG8gPSBhd2FpdCBkLmZpbmRCeUltYWdlKHRlbXBsYXRlLCB7bXVsdGlwbGU6IGZhbHNlfSk7XG4gICAgICBiYXNpY0ltZ0VsVmVyaWZ5KGltZ0VsUHJvdG8sIGQpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZmluZCBpbWFnZSBlbGVtZW50cyBoYXBweXBhdGgnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGNvbnN0IHtjb21wYXJlU3R1Yn0gPSBiYXNpY1N0dWIoZCk7XG4gICAgICBjb21wYXJlU3R1Yi5yZXR1cm5zKFt7cmVjdCwgc2NvcmV9XSk7XG5cbiAgICAgIGNvbnN0IGVscyA9IGF3YWl0IGQuZmluZEJ5SW1hZ2UodGVtcGxhdGUsIHttdWx0aXBsZTogdHJ1ZX0pO1xuICAgICAgZWxzLnNob3VsZC5oYXZlLmxlbmd0aCgxKTtcbiAgICAgIGJhc2ljSW1nRWxWZXJpZnkoZWxzWzBdLCBkKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGZhaWwgaWYgZHJpdmVyIGRvZXMgbm90IHN1cHBvcnQgZ2V0V2luZG93U2l6ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgICAgYXdhaXQgZC5maW5kQnlJbWFnZSh0ZW1wbGF0ZSwge211bHRpcGxlOiBmYWxzZX0pXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2RyaXZlciBkb2VzIG5vdCBzdXBwb3J0Lyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBmaXggdGVtcGxhdGUgc2l6ZSBpZiByZXF1ZXN0ZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGNvbnN0IG5ld1RlbXBsYXRlID0gJ2lWQk9SYmF6JztcbiAgICAgIGNvbnN0IHtjb21wYXJlU3R1Yn0gPSBiYXNpY1N0dWIoZCk7XG4gICAgICBhd2FpdCBkLnNldHRpbmdzLnVwZGF0ZSh7Zml4SW1hZ2VUZW1wbGF0ZVNpemU6IHRydWV9KTtcbiAgICAgIHNpbm9uLnN0dWIoZCwgJ2Vuc3VyZVRlbXBsYXRlU2l6ZScpLnJldHVybnMobmV3VGVtcGxhdGUpO1xuICAgICAgY29uc3QgaW1nRWxQcm90byA9IGF3YWl0IGQuZmluZEJ5SW1hZ2UodGVtcGxhdGUsIHttdWx0aXBsZTogZmFsc2V9KTtcbiAgICAgIGNvbnN0IGltZ0VsID0gYmFzaWNJbWdFbFZlcmlmeShpbWdFbFByb3RvLCBkKTtcbiAgICAgIGltZ0VsLnRlbXBsYXRlLnNob3VsZC5lcWwobmV3VGVtcGxhdGUpO1xuICAgICAgY29tcGFyZVN0dWIuYXJnc1swXVsyXS5zaG91bGQuZXFsKG5ld1RlbXBsYXRlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZml4IHRlbXBsYXRlIHNpemUgc2NhbGUgaWYgcmVxdWVzdGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBjb25zdCBuZXdUZW1wbGF0ZSA9ICdpVkJPUmJheic7XG4gICAgICBjb25zdCB7Y29tcGFyZVN0dWJ9ID0gYmFzaWNTdHViKGQpO1xuICAgICAgYXdhaXQgZC5zZXR0aW5ncy51cGRhdGUoe2ZpeEltYWdlVGVtcGxhdGVTY2FsZTogdHJ1ZX0pO1xuICAgICAgc2lub24uc3R1YihkLCAnZml4SW1hZ2VUZW1wbGF0ZVNjYWxlJykucmV0dXJucyhuZXdUZW1wbGF0ZSk7XG4gICAgICBjb25zdCBpbWdFbFByb3RvID0gYXdhaXQgZC5maW5kQnlJbWFnZSh0ZW1wbGF0ZSwge211bHRpcGxlOiBmYWxzZX0pO1xuICAgICAgY29uc3QgaW1nRWwgPSBiYXNpY0ltZ0VsVmVyaWZ5KGltZ0VsUHJvdG8sIGQpO1xuICAgICAgaW1nRWwudGVtcGxhdGUuc2hvdWxkLmVxbChuZXdUZW1wbGF0ZSk7XG4gICAgICBjb21wYXJlU3R1Yi5hcmdzWzBdWzJdLnNob3VsZC5lcWwobmV3VGVtcGxhdGUpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IGZpeCB0ZW1wbGF0ZSBzaXplIHNjYWxlIGlmIGl0IGlzIG5vdCByZXF1ZXN0ZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGNvbnN0IG5ld1RlbXBsYXRlID0gJ2lWQk9SYmF6JztcbiAgICAgIGJhc2ljU3R1YihkKTtcbiAgICAgIGF3YWl0IGQuc2V0dGluZ3MudXBkYXRlKHt9KTtcbiAgICAgIHNpbm9uLnN0dWIoZCwgJ2ZpeEltYWdlVGVtcGxhdGVTY2FsZScpLnJldHVybnMobmV3VGVtcGxhdGUpO1xuICAgICAgZC5maXhJbWFnZVRlbXBsYXRlU2NhbGUuY2FsbENvdW50LnNob3VsZC5lcWwoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRlbXBsYXRlIG1hdGNoIGZhaWxzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBjb25zdCB7Y29tcGFyZVN0dWJ9ID0gYmFzaWNTdHViKGQpO1xuICAgICAgY29tcGFyZVN0dWIudGhyb3dzKG5ldyBFcnJvcignQ2Fubm90IGZpbmQgYW55IG9jY3VycmVuY2VzJykpO1xuICAgICAgYXdhaXQgZC5maW5kQnlJbWFnZSh0ZW1wbGF0ZSwge211bHRpcGxlOiBmYWxzZX0pXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2VsZW1lbnQgY291bGQgbm90IGJlIGxvY2F0ZWQvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgbXVsdGlwbGUgZWxlbWVudHMgaWYgdGVtcGxhdGUgbWF0Y2ggZmFpbHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IFRlc3REcml2ZXIoKTtcbiAgICAgIGNvbnN0IHtjb21wYXJlU3R1Yn0gPSBiYXNpY1N0dWIoZCk7XG4gICAgICBjb21wYXJlU3R1Yi50aHJvd3MobmV3IEVycm9yKCdDYW5ub3QgZmluZCBhbnkgb2NjdXJyZW5jZXMnKSk7XG4gICAgICBhd2FpdCBkLmZpbmRCeUltYWdlKHRlbXBsYXRlLCB7bXVsdGlwbGU6IHRydWV9KS5zaG91bGQuZXZlbnR1YWxseS5lcWwoW10pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmVzcGVjdCBpbXBsaWNpdCB3YWl0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBkLnNldEltcGxpY2l0V2FpdCgxMCk7XG4gICAgICBjb25zdCB7Y29tcGFyZVN0dWJ9ID0gYmFzaWNTdHViKGQpO1xuICAgICAgY29tcGFyZVN0dWIub25DYWxsKDApLnRocm93cyhuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIGFueSBvY2N1cnJlbmNlcycpKTtcbiAgICAgIGNvbnN0IGltZ0VsUHJvdG8gPSBhd2FpdCBkLmZpbmRCeUltYWdlKHRlbXBsYXRlLCB7bXVsdGlwbGU6IGZhbHNlfSk7XG4gICAgICBiYXNpY0ltZ0VsVmVyaWZ5KGltZ0VsUHJvdG8sIGQpO1xuICAgICAgY29tcGFyZVN0dWIuY2FsbENvdW50LnNob3VsZC5lcWwoMik7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgYWRkIGVsZW1lbnQgdG8gY2FjaGUgYW5kIHJldHVybiBpdCBkaXJlY3RseSB3aGVuIGNoZWNraW5nIHN0YWxlbmVzcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgYmFzaWNTdHViKGQpO1xuICAgICAgY29uc3QgaW1nRWwgPSBhd2FpdCBkLmZpbmRCeUltYWdlKHRlbXBsYXRlLCB7bXVsdGlwbGU6IGZhbHNlLCBzaG91bGRDaGVja1N0YWxlbmVzczogdHJ1ZX0pO1xuICAgICAgKGltZ0VsIGluc3RhbmNlb2YgSW1hZ2VFbGVtZW50KS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGQuX2ltZ0VsQ2FjaGUuaGFzKGltZ0VsLmlkKS5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBpbWdFbC5yZWN0LnNob3VsZC5lcWwocmVjdCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaXhJbWFnZVRlbXBsYXRlU2NhbGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBub3QgZml4IHRlbXBsYXRlIHNpemUgc2NhbGUgaWYgbm8gc2NhbGUgdmFsdWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBuZXdUZW1wbGF0ZSA9ICdpVkJPUmJheic7XG4gICAgICBhd2FpdCBoZWxwZXJzLmZpeEltYWdlVGVtcGxhdGVTY2FsZShuZXdUZW1wbGF0ZSwge2ZpeEltYWdlVGVtcGxhdGVTY2FsZTogdHJ1ZX0pXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5lcWwobmV3VGVtcGxhdGUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZml4IHRlbXBsYXRlIHNpemUgc2NhbGUgaWYgaXQgaXMgbnVsbCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG5ld1RlbXBsYXRlID0gJ2lWQk9SYmF6JztcbiAgICAgIGF3YWl0IGhlbHBlcnMuZml4SW1hZ2VUZW1wbGF0ZVNjYWxlKG5ld1RlbXBsYXRlLCBudWxsKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKG5ld1RlbXBsYXRlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGZpeCB0ZW1wbGF0ZSBzaXplIHNjYWxlIGlmIGl0IGlzIG5vdCBudW1iZXInLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBuZXdUZW1wbGF0ZSA9ICdpVkJPUmJheic7XG4gICAgICBhd2FpdCBoZWxwZXJzLmZpeEltYWdlVGVtcGxhdGVTY2FsZShuZXdUZW1wbGF0ZSwgJ3dyb25nLXNjYWxlJylcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmVxbChuZXdUZW1wbGF0ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpeCB0ZW1wbGF0ZSBzaXplIHNjYWxlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgYWN0dWFsID0gJ2lWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBWUFBQUFHQ0FZQUFBRGd6TzlJQUFBQVdFbEVRVlI0QVUzQlFSV0FRQWhBd2EvUEdCc0VnckMxNkFGQktFSVBYVzdPWE8rUm1leTlpUWpNakhGenJMVXdNN3FicW1MY0hLcEtSRkJWdUR2ajRhZ3EzQjFWUlVRWVQyYlMzUXdSUVZVWkYvQ2FHUkhCM3djMXZTWmJITzUrQmdBQUFBQkpSVTVFcmtKZ2dnPT0nO1xuICAgICAgYXdhaXQgaGVscGVycy5maXhJbWFnZVRlbXBsYXRlU2NhbGUoVElOWV9QTkcsIHtcbiAgICAgICAgZml4SW1hZ2VUZW1wbGF0ZVNjYWxlOiB0cnVlLCB4U2NhbGU6IDEuNSwgeVNjYWxlOiAxLjVcbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmVxbChhY3R1YWwpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZml4IHRlbXBsYXRlIHNpemUgc2NhbGUgYmVjYXVzZSBvZiBmaXhJbWFnZVRlbXBsYXRlU2NhbGUgaXMgZmFsc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBoZWxwZXJzLmZpeEltYWdlVGVtcGxhdGVTY2FsZShUSU5ZX1BORywge1xuICAgICAgICBmaXhJbWFnZVRlbXBsYXRlU2NhbGU6IGZhbHNlLCB4U2NhbGU6IDEuNSwgeVNjYWxlOiAxLjVcbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmVxbChUSU5ZX1BORyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpeCB0ZW1wbGF0ZSBzaXplIHNjYWxlIHdpdGggZGVmYXVsdCBzY2FsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGFjdHVhbCA9ICdpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUJ3VWxFUVZSNEFhWEJQVXNyUVFDRzBTZVgrY0Jka1Rqd1RwRzFOUGdMcGpZL2ZXMXN0dDRVWW1tMmNKcXdNQ3NhdzcwdUpKM0NCYzlaL1AzQ2wrMTJTOXUydEcxTDI3YkVHTG0vdjJlejJiRFpiSkRFZC83d1M0WVQ3ejNYMTlmYzNOeHdkM2RIWGRkNDd4bkhrZWZuWjhaeHBLb3E2cnFtcWlxTU1jd01KMVZWMFRRTjB6VGhuT1BqNDRPNnJzazUwM1Vka21pYWhxWnBXSzFXR0dPWUdVN3F1cVpwR3F5MVNDTG5UTTZaMTlkWGNzNUlZcG9tckxWSTR1TGlncG5ocEtvcVZxc1ZramdjRGp3OVBkRjFIVGxudXE1REVzNDVKSEU0SERnem5CeVBSOTdlM3BpbWlWSUs0emh5UEI3eDNoTkNJSVRBNWVVbDNuc1dpd1ZuaHBOU0NzTXdzTnZ0R0lhQi9YNVBLUVZKcEpTUXhIcTlSaExPT2M0TUo5TTBzZHZ0Mkc2MzlIM1BUQkl4UmlRaENVbkVHTEhXY21ZNEthVXdEQU45My9QNCtNaHl1U1NsaENSU1NrakNPWWUxRm1zdFo2YnZlMll2THkvczkzdG15K1VTU1VoQ0VwSUlJZkFkOC9Ed3dPejkvWjFTQ3BKSUtTR0o5WHFOSkp4ei9NUzBiY3ZzNnVvS1NjUVlrWVFrSkJGanhGckxUMHpidHN4dWIyOUpLU0dKbEJLU2NNNWhyY1ZheTA5TXpwbFpqSkhQejArODk0UVFDQ0h3UC83d1MvOEE0ZTZuQWcrUjhMd0FBQUFBU1VWT1JLNUNZSUk9JztcbiAgICAgIGF3YWl0IGhlbHBlcnMuZml4SW1hZ2VUZW1wbGF0ZVNjYWxlKFRJTllfUE5HLCB7XG4gICAgICAgIGRlZmF1bHRJbWFnZVRlbXBsYXRlU2NhbGU6IDQuMFxuICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKGFjdHVhbCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpeCB0ZW1wbGF0ZSBzaXplIHNjYWxlIHdpdGggZGVmYXVsdCBzY2FsZSBhbmQgaW1hZ2Ugc2NhbGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBhY3R1YWwgPSAnaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQVlBQUFEZ2R6MzRBQUFDYVVsRVFWUjRBYlhCTVd2cldCU0YwYzlCc0ZQdFc5MVVSMVU2Ky8vL0ZLbEtLdDhxcW55cW5Nb3pnZ2tJOHhnTWo2eDF1ditMLzZ6cnlySXNyT3ZLc2l5czY4cXlMRnd1Rjg3bk01ZkxoZlA1ek9WeTRYdys4NHdYZnRrTHYyemlRQksyNmIwVEVWUVZ1NGpBTnJ2TTVIcTlzcE9FSkNRaENVbEk0bWppUUJLMjZiMVRWZXdrWVJ2YjdES1RNUWFaaVcxczAxckROcmFSeE5IRWdTUmFhMVFWTzBtMDFqaktUREtUWGUrZDNqdFZ4VTRTanlZT0pHR2JuU1JzMDNzbk04bE1NcFBiN1VabWtwbEVCRlhGVGhLMmVUUnhJQW5iU01JMlZjWDM5emRqRE1ZWVpDYVp5UmlETVFaVnhVNFN0cWtxSGswY1NFSVNmNUtaN0RLVE1RYkxzckNUUkd1TjNqdFZ4YU9KZzZxaXFxZ3Fxb3Fxb3FvWVk1Q1o3R3dURWR6dmQ5N2YzNGtJZXUvWVJoS1BKZzZxaXN3a003bmRibVFtbVVsbWtwbnNiQk1SMkNZaW1PZVozanUya2NTamlZT3FJalA1K3ZwaTJ6YTJiV1BiTm81YWE3VFcyUFhlNmIzVGU2ZTFoaVFlVFJ4VUZiZmJqVzNiR0dOd3ZWNFpZMkFiMjdUV3NJMXRiR01iMjdUV3NJMGtIazBjVkJXWnliWnRYSzlYUGo4LytmajRZSjVuSW9MV0dyYUpDT1o1UmhLU2tJUWtKUEZvNHFDcXlFeTJiV09Nd2VmbkordTZjanFkc00zT052TThjejZmZWNhMHJpcy9ydGNybWNuT05oSEIvWDduL2YyZGlLRDNqbTBrOGF4cFdSWitaQ2FaeWM0MkVZRnRJb0o1bnVtOVl4dEpQR3RhMTVVL3NZMXRkbTl2Yi9UZTZiMWpHMGs4YTFxV2hSKzJzVTFyamRZYXRyR05iV3hqbTlZYWtuald0SzRyUHlLQ2lLQzFobTBpZ29qZzlmVVZTVWhDRXBKNDFyUXNDMGUyMmRrbUlyaGNMdnlORi83SDZYVGliNzN3eTE3NFpmOEFKRXNlUHRsUGoxMEFBQUFBU1VWT1JLNUNZSUk9JztcbiAgICAgIGF3YWl0IGhlbHBlcnMuZml4SW1hZ2VUZW1wbGF0ZVNjYWxlKFRJTllfUE5HLCB7XG4gICAgICAgIGRlZmF1bHRJbWFnZVRlbXBsYXRlU2NhbGU6IDQuMCxcbiAgICAgICAgZml4SW1hZ2VUZW1wbGF0ZVNjYWxlOiB0cnVlLFxuICAgICAgICB4U2NhbGU6IDEuNSwgeVNjYWxlOiAxLjVcbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmVxbChhY3R1YWwpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZml4IHRlbXBsYXRlIHNpemUgc2NhbGUgd2l0aCBkZWZhdWx0IHNjYWxlIGFuZCBpbWFnZSBzY2FsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGFjdHVhbCA9ICdpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUJ3VWxFUVZSNEFhWEJQVXNyUVFDRzBTZVgrY0Jka1Rqd1RwRzFOUGdMcGpZL2ZXMXN0dDRVWW1tMmNKcXdNQ3NhdzcwdUpKM0NCYzlaL1AzQ2wrMTJTOXUydEcxTDI3YkVHTG0vdjJlejJiRFpiSkRFZC83d1M0WVQ3ejNYMTlmYzNOeHdkM2RIWGRkNDd4bkhrZWZuWjhaeHBLb3E2cnFtcWlxTU1jd01KMVZWMFRRTjB6VGhuT1BqNDRPNnJzazUwM1Vka21pYWhxWnBXSzFXR0dPWUdVN3F1cVpwR3F5MVNDTG5UTTZaMTlkWGNzNUlZcG9tckxWSTR1TGlncG5ocEtvcVZxc1ZramdjRGp3OVBkRjFIVGxudXE1REVzNDVKSEU0SERnem5CeVBSOTdlM3BpbWlWSUs0emh5UEI3eDNoTkNJSVRBNWVVbDNuc1dpd1ZuaHBOU0NzTXdzTnZ0R0lhQi9YNVBLUVZKcEpTUXhIcTlSaExPT2M0TUo5TTBzZHZ0Mkc2MzlIM1BUQkl4UmlRaENVbkVHTEhXY21ZNEthVXdEQU45My9QNCtNaHl1U1NsaENSU1NrakNPWWUxRm1zdFo2YnZlMll2THkvczkzdG15K1VTU1VoQ0VwSUlJZkFkOC9Ed3dPejkvWjFTQ3BKSUtTR0o5WHFOSkp4ei9NUzBiY3ZzNnVvS1NjUVlrWVFrSkJGanhGckxUMHpidHN4dWIyOUpLU0dKbEJLU2NNNWhyY1ZheTA5TXpwbFpqSkhQejArODk0UVFDQ0h3UC83d1MvOEE0ZTZuQWcrUjhMd0FBQUFBU1VWT1JLNUNZSUk9JztcbiAgICAgIGF3YWl0IGhlbHBlcnMuZml4SW1hZ2VUZW1wbGF0ZVNjYWxlKFRJTllfUE5HLCB7XG4gICAgICAgIGRlZmF1bHRJbWFnZVRlbXBsYXRlU2NhbGU6IDQuMCxcbiAgICAgICAgZml4SW1hZ2VUZW1wbGF0ZVNjYWxlOiBmYWxzZSxcbiAgICAgICAgeFNjYWxlOiAxLjUsIHlTY2FsZTogMS41XG4gICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5lcWwoYWN0dWFsKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGZpeCB0ZW1wbGF0ZSBzaXplIHNjYWxlIGJlY2F1c2Ugb2YgaWdub3JlRGVmYXVsdEltYWdlVGVtcGxhdGVTY2FsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGhlbHBlcnMuZml4SW1hZ2VUZW1wbGF0ZVNjYWxlKFRJTllfUE5HLCB7XG4gICAgICAgIGRlZmF1bHRJbWFnZVRlbXBsYXRlU2NhbGU6IDQuMCxcbiAgICAgICAgaWdub3JlRGVmYXVsdEltYWdlVGVtcGxhdGVTY2FsZTogdHJ1ZSxcbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmVxbChUSU5ZX1BORyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGlnbm9yZSBkZWZhdWx0SW1hZ2VUZW1wbGF0ZVNjYWxlIHRvIGZpeCB0ZW1wbGF0ZSBzaXplIHNjYWxlIGJlY2F1c2Ugb2YgaWdub3JlRGVmYXVsdEltYWdlVGVtcGxhdGVTY2FsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGFjdHVhbCA9ICdpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQVlBQUFBR0NBWUFBQURnek85SUFBQUFXRWxFUVZSNEFVM0JRUldBUUFoQXdhL1BHQnNFZ3JDMTZBRkJLRUlQWFc3T1hPK1JtZXk5aVFqTWpIRnpyTFV3TTdxYnFtTGNIS3BLUkZCVnVEdmo0YWdxM0IxVlJVUVlUMmJTM1F3UlFWVVpGL0NhR1JIQjN3YzF2U1piSE81K0JnQUFBQUJKUlU1RXJrSmdnZz09JztcbiAgICAgIGF3YWl0IGhlbHBlcnMuZml4SW1hZ2VUZW1wbGF0ZVNjYWxlKFRJTllfUE5HLCB7XG4gICAgICAgIGRlZmF1bHRJbWFnZVRlbXBsYXRlU2NhbGU6IDQuMCxcbiAgICAgICAgaWdub3JlRGVmYXVsdEltYWdlVGVtcGxhdGVTY2FsZTogdHJ1ZSxcbiAgICAgICAgZml4SW1hZ2VUZW1wbGF0ZVNjYWxlOiB0cnVlLFxuICAgICAgICB4U2NhbGU6IDEuNSwgeVNjYWxlOiAxLjVcbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmVxbChhY3R1YWwpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZW5zdXJlVGVtcGxhdGVTaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgbm90IHJlc2l6ZSB0aGUgdGVtcGxhdGUgaWYgaXQgaXMgc21hbGxlciB0aGFuIHRoZSBzY3JlZW4nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBzY3JlZW4gPSBUSU5ZX1BOR19ESU1TLm1hcCgobikgPT4gbiAqIDIpO1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBhd2FpdCBkLmVuc3VyZVRlbXBsYXRlU2l6ZShUSU5ZX1BORywgLi4uc2NyZWVuKVxuICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuZXFsKFRJTllfUE5HKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCByZXNpemUgdGhlIHRlbXBsYXRlIGlmIGl0IGlzIHRoZSBzYW1lIHNpemUgYXMgdGhlIHNjcmVlbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgYXdhaXQgZC5lbnN1cmVUZW1wbGF0ZVNpemUoVElOWV9QTkcsIC4uLlRJTllfUE5HX0RJTVMpXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5lcWwoVElOWV9QTkcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmVzaXplIHRoZSB0ZW1wbGF0ZSBpZiBpdCBpcyBiaWdnZXIgdGhhbiB0aGUgc2NyZWVuJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBjb25zdCBzY3JlZW4gPSBUSU5ZX1BOR19ESU1TLm1hcCgobikgPT4gbiAvIDIpO1xuICAgICAgY29uc3QgbmV3VGVtcGxhdGUgPSBhd2FpdCBkLmVuc3VyZVRlbXBsYXRlU2l6ZShUSU5ZX1BORywgLi4uc2NyZWVuKTtcbiAgICAgIG5ld1RlbXBsYXRlLnNob3VsZC5ub3QuZXFsKFRJTllfUE5HKTtcbiAgICAgIG5ld1RlbXBsYXRlLmxlbmd0aC5zaG91bGQuYmUuYmVsb3coVElOWV9QTkcubGVuZ3RoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFNjcmVlbnNob3RGb3JJbWFnZUZpbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBmYWlsIGlmIGRyaXZlciBkb2VzIG5vdCBzdXBwb3J0IGdldFNjcmVlbnNob3QnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICAgIGF3YWl0IGQuZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCgpXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2RyaXZlciBkb2VzIG5vdCBzdXBwb3J0Lyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgYWRqdXN0IG9yIHZlcmlmeSBzY3JlZW5zaG90IGlmIGFza2VkIG5vdCB0byBieSBzZXR0aW5ncycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgc2lub24uc3R1YihkLCAnZ2V0U2NyZWVuc2hvdCcpLnJldHVybnMoVElOWV9QTkcpO1xuICAgICAgZC5zZXR0aW5ncy51cGRhdGUoe2ZpeEltYWdlRmluZFNjcmVlbnNob3REaW1zOiBmYWxzZX0pO1xuICAgICAgY29uc3Qgc2NyZWVuID0gVElOWV9QTkdfRElNUy5tYXAoKG4pID0+IG4gKyAxKTtcbiAgICAgIGNvbnN0IHtiNjRTY3JlZW5zaG90LCBzY2FsZX0gPSBhd2FpdCBkLmdldFNjcmVlbnNob3RGb3JJbWFnZUZpbmQoLi4uc2NyZWVuKTtcbiAgICAgIGI2NFNjcmVlbnNob3Quc2hvdWxkLmVxbChUSU5ZX1BORyk7XG4gICAgICBzaG91bGQuZXF1YWwoc2NhbGUsIHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2NyZWVuc2hvdCB3aXRob3V0IGFkanVzdG1lbnQgaWYgaXQgbWF0Y2hlcyBzY3JlZW4gc2l6ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGQgPSBuZXcgVGVzdERyaXZlcigpO1xuICAgICAgc2lub24uc3R1YihkLCAnZ2V0U2NyZWVuc2hvdCcpLnJldHVybnMoVElOWV9QTkcpO1xuICAgICAgY29uc3Qge2I2NFNjcmVlbnNob3QsIHNjYWxlfSA9IGF3YWl0IGQuZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCguLi5USU5ZX1BOR19ESU1TKTtcbiAgICAgIGI2NFNjcmVlbnNob3Quc2hvdWxkLmVxbChUSU5ZX1BORyk7XG4gICAgICBzaG91bGQuZXF1YWwoc2NhbGUsIHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2NhbGVkIHNjcmVlbnNob3Qgd2l0aCBzYW1lIGFzcGVjdCByYXRpbyBpZiBtYXRjaGluZyBzY3JlZW4gYXNwZWN0IHJhdGlvJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBzaW5vbi5zdHViKGQsICdnZXRTY3JlZW5zaG90JykucmV0dXJucyhUSU5ZX1BORyk7XG4gICAgICBjb25zdCBzY3JlZW4gPSBUSU5ZX1BOR19ESU1TLm1hcCgobikgPT4gbiAqIDEuNSk7XG4gICAgICBjb25zdCB7YjY0U2NyZWVuc2hvdCwgc2NhbGV9ID0gYXdhaXQgZC5nZXRTY3JlZW5zaG90Rm9ySW1hZ2VGaW5kKC4uLnNjcmVlbik7XG4gICAgICBiNjRTY3JlZW5zaG90LnNob3VsZC5ub3QuZXFsKFRJTllfUE5HKTtcbiAgICAgIGNvbnN0IHNjcmVlbnNob3RPYmogPSBhd2FpdCBpbWFnZVV0aWwuZ2V0SmltcEltYWdlKGI2NFNjcmVlbnNob3QpO1xuICAgICAgc2NyZWVuc2hvdE9iai5iaXRtYXAud2lkdGguc2hvdWxkLmVxbChzY3JlZW5bMF0pO1xuICAgICAgc2NyZWVuc2hvdE9iai5iaXRtYXAuaGVpZ2h0LnNob3VsZC5lcWwoc2NyZWVuWzFdKTtcbiAgICAgIHNjYWxlLnNob3VsZC5lcWwoeyB4U2NhbGU6IDEuNSwgeVNjYWxlOiAxLjUgfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2NhbGVkIHNjcmVlbnNob3Qgd2l0aCBkaWZmZXJlbnQgYXNwZWN0IHJhdGlvIGlmIG5vdCBtYXRjaGluZyBzY3JlZW4gYXNwZWN0IHJhdGlvJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBzaW5vbi5zdHViKGQsICdnZXRTY3JlZW5zaG90JykucmV0dXJucyhUSU5ZX1BORyk7XG5cbiAgICAgIC8vIHRyeSBmaXJzdCB3aXRoIHBvcnRyYWl0IHNjcmVlbiwgc2NyZWVuID0gOCB4IDEyXG4gICAgICBsZXQgc2NyZWVuID0gW1RJTllfUE5HX0RJTVNbMF0gKiAyLCBUSU5ZX1BOR19ESU1TWzFdICogM107XG4gICAgICBsZXQgZXhwZWN0ZWRTY2FsZSA9IHsgeFNjYWxlOiAyLjY3LCB5U2NhbGU6IDQgfTtcblxuICAgICAgY29uc3Qge2I2NFNjcmVlbnNob3QsIHNjYWxlfSA9IGF3YWl0IGQuZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCguLi5zY3JlZW4pO1xuICAgICAgYjY0U2NyZWVuc2hvdC5zaG91bGQubm90LmVxbChUSU5ZX1BORyk7XG4gICAgICBsZXQgc2NyZWVuc2hvdE9iaiA9IGF3YWl0IGltYWdlVXRpbC5nZXRKaW1wSW1hZ2UoYjY0U2NyZWVuc2hvdCk7XG4gICAgICBzY3JlZW5zaG90T2JqLmJpdG1hcC53aWR0aC5zaG91bGQuZXFsKHNjcmVlblswXSk7XG4gICAgICBzY3JlZW5zaG90T2JqLmJpdG1hcC5oZWlnaHQuc2hvdWxkLmVxbChzY3JlZW5bMV0pO1xuICAgICAgc2NhbGUueFNjYWxlLnRvRml4ZWQoMikuc2hvdWxkLmVxbChleHBlY3RlZFNjYWxlLnhTY2FsZS50b1N0cmluZygpKTtcbiAgICAgIHNjYWxlLnlTY2FsZS5zaG91bGQuZXFsKGV4cGVjdGVkU2NhbGUueVNjYWxlKTtcblxuICAgICAgLy8gdGhlbiB3aXRoIGxhbmRzY2FwZSBzY3JlZW4sIHNjcmVlbiA9IDEyIHggOFxuICAgICAgc2NyZWVuID0gW1RJTllfUE5HX0RJTVNbMF0gKiAzLCBUSU5ZX1BOR19ESU1TWzFdICogMl07XG4gICAgICBleHBlY3RlZFNjYWxlID0geyB4U2NhbGU6IDQsIHlTY2FsZTogMi42NyB9O1xuXG4gICAgICBjb25zdCB7YjY0U2NyZWVuc2hvdDogbmV3U2NyZWVuLCBzY2FsZTogbmV3U2NhbGV9ID0gYXdhaXQgZC5nZXRTY3JlZW5zaG90Rm9ySW1hZ2VGaW5kKC4uLnNjcmVlbik7XG4gICAgICBuZXdTY3JlZW4uc2hvdWxkLm5vdC5lcWwoVElOWV9QTkcpO1xuICAgICAgc2NyZWVuc2hvdE9iaiA9IGF3YWl0IGltYWdlVXRpbC5nZXRKaW1wSW1hZ2UobmV3U2NyZWVuKTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLndpZHRoLnNob3VsZC5lcWwoc2NyZWVuWzBdKTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLmhlaWdodC5zaG91bGQuZXFsKHNjcmVlblsxXSk7XG4gICAgICBuZXdTY2FsZS54U2NhbGUuc2hvdWxkLmVxbChleHBlY3RlZFNjYWxlLnhTY2FsZSk7XG4gICAgICBuZXdTY2FsZS55U2NhbGUudG9GaXhlZCgyKS5zaG91bGQuZXFsKGV4cGVjdGVkU2NhbGUueVNjYWxlLnRvU3RyaW5nKCkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2NhbGVkIHNjcmVlbnNob3Qgd2l0aCBkaWZmZXJlbnQgYXNwZWN0IHJhdGlvIGlmIG5vdCBtYXRjaGluZyBzY3JlZW4gYXNwZWN0IHJhdGlvIHdpdGggZml4SW1hZ2VUZW1wbGF0ZVNjYWxlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZCA9IG5ldyBUZXN0RHJpdmVyKCk7XG4gICAgICBzaW5vbi5zdHViKGQsICdnZXRTY3JlZW5zaG90JykucmV0dXJucyhUSU5ZX1BORyk7XG5cbiAgICAgIC8vIHRyeSBmaXJzdCB3aXRoIHBvcnRyYWl0IHNjcmVlbiwgc2NyZWVuID0gOCB4IDEyXG4gICAgICBsZXQgc2NyZWVuID0gW1RJTllfUE5HX0RJTVNbMF0gKiAyLCBUSU5ZX1BOR19ESU1TWzFdICogM107XG4gICAgICBsZXQgZXhwZWN0ZWRTY2FsZSA9IHsgeFNjYWxlOiAyLjY3LCB5U2NhbGU6IDQgfTtcblxuICAgICAgY29uc3Qge2I2NFNjcmVlbnNob3QsIHNjYWxlfSA9IGF3YWl0IGQuZ2V0U2NyZWVuc2hvdEZvckltYWdlRmluZCguLi5zY3JlZW4pO1xuICAgICAgYjY0U2NyZWVuc2hvdC5zaG91bGQubm90LmVxbChUSU5ZX1BORyk7XG4gICAgICBsZXQgc2NyZWVuc2hvdE9iaiA9IGF3YWl0IGltYWdlVXRpbC5nZXRKaW1wSW1hZ2UoYjY0U2NyZWVuc2hvdCk7XG4gICAgICBzY3JlZW5zaG90T2JqLmJpdG1hcC53aWR0aC5zaG91bGQuZXFsKHNjcmVlblswXSk7XG4gICAgICBzY3JlZW5zaG90T2JqLmJpdG1hcC5oZWlnaHQuc2hvdWxkLmVxbChzY3JlZW5bMV0pO1xuICAgICAgc2NhbGUueFNjYWxlLnRvRml4ZWQoMikuc2hvdWxkLmVxbChleHBlY3RlZFNjYWxlLnhTY2FsZS50b1N0cmluZygpKTtcbiAgICAgIHNjYWxlLnlTY2FsZS5zaG91bGQuZXFsKGV4cGVjdGVkU2NhbGUueVNjYWxlKTtcbiAgICAgIC8vIDggeCAxMiBzdHJldGNoZWQgVElOWV9QTkdcbiAgICAgIGF3YWl0IGhlbHBlcnMuZml4SW1hZ2VUZW1wbGF0ZVNjYWxlKGI2NFNjcmVlbnNob3QsIHtmaXhJbWFnZVRlbXBsYXRlU2NhbGU6IHRydWUsIHNjYWxlfSlcbiAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmVxbCgnaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFnQUFBQU1DQVlBQUFCZm52eWRBQUFBSjBsRVFWUjRBWVhCQVFFQUlBQ0RNS1IvcDBmVEJyS2RiWmNQQ1JJa1NKQWdRWUlFQ1JJa1BBekJBMVRwZU53WkFBQUFBRWxGVGtTdVFtQ0MnKTtcblxuICAgICAgLy8gdGhlbiB3aXRoIGxhbmRzY2FwZSBzY3JlZW4sIHNjcmVlbiA9IDEyIHggOFxuICAgICAgc2NyZWVuID0gW1RJTllfUE5HX0RJTVNbMF0gKiAzLCBUSU5ZX1BOR19ESU1TWzFdICogMl07XG4gICAgICBleHBlY3RlZFNjYWxlID0geyB4U2NhbGU6IDQsIHlTY2FsZTogMi42NyB9O1xuXG4gICAgICBjb25zdCB7YjY0U2NyZWVuc2hvdDogbmV3U2NyZWVuLCBzY2FsZTogbmV3U2NhbGV9ID0gYXdhaXQgZC5nZXRTY3JlZW5zaG90Rm9ySW1hZ2VGaW5kKC4uLnNjcmVlbik7XG4gICAgICBuZXdTY3JlZW4uc2hvdWxkLm5vdC5lcWwoVElOWV9QTkcpO1xuICAgICAgc2NyZWVuc2hvdE9iaiA9IGF3YWl0IGltYWdlVXRpbC5nZXRKaW1wSW1hZ2UobmV3U2NyZWVuKTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLndpZHRoLnNob3VsZC5lcWwoc2NyZWVuWzBdKTtcbiAgICAgIHNjcmVlbnNob3RPYmouYml0bWFwLmhlaWdodC5zaG91bGQuZXFsKHNjcmVlblsxXSk7XG4gICAgICBuZXdTY2FsZS54U2NhbGUuc2hvdWxkLmVxbChleHBlY3RlZFNjYWxlLnhTY2FsZSk7XG4gICAgICBuZXdTY2FsZS55U2NhbGUudG9GaXhlZCgyKS5zaG91bGQuZXFsKGV4cGVjdGVkU2NhbGUueVNjYWxlLnRvU3RyaW5nKCkpO1xuICAgICAgLy8gMTIgeCA4IHN0cmV0Y2hlZCBUSU5ZX1BOR1xuICAgICAgYXdhaXQgaGVscGVycy5maXhJbWFnZVRlbXBsYXRlU2NhbGUobmV3U2NyZWVuLCB7Zml4SW1hZ2VUZW1wbGF0ZVNjYWxlOiB0cnVlLCBzY2FsZX0pXG4gICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5lcWwoJ2lWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBd0FBQUFJQ0FZQUFBRE41Qjd4QUFBQUkwbEVRVlI0QVpYQkFRRUFNQXlETUk1L1Q1VzJheUI1MjQ1QUlva2tra2dpaVNUNitXNERUTHlvNVBVQUFBQUFTVVZPUks1Q1lJST0nKTtcbiAgICB9KTtcblxuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnY3VzdG9tIGVsZW1lbnQgZmluZGluZyBwbHVnaW5zJywgZnVuY3Rpb24gKCkge1xuICAvLyBoYXBweXNcbiAgaXQoJ3Nob3VsZCBmaW5kIGEgc2luZ2xlIGVsZW1lbnQgdXNpbmcgYSBjdXN0b20gZmluZGVyJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBDVVNUT01fRklORF9NT0RVTEV9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCAnZjpmb28nKS5zaG91bGQuZXZlbnR1YWxseS5lcWwoJ2JhcicpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBub3QgcmVxdWlyZSBzZWxlY3RvciBwcmVmaXggaWYgb25seSBvbmUgZmluZCBwbHVnaW4gaXMgcmVnaXN0ZXJlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLm9wdHMuY3VzdG9tRmluZE1vZHVsZXMgPSB7ZjogQ1VTVE9NX0ZJTkRfTU9EVUxFfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgJ2ZvbycpLnNob3VsZC5ldmVudHVhbGx5LmVxbCgnYmFyJyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGZpbmQgbXVsdGlwbGUgZWxlbWVudHMgdXNpbmcgYSBjdXN0b20gZmluZGVyJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBDVVNUT01fRklORF9NT0RVTEV9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnRzKENVU1RPTV9TVFJBVEVHWSwgJ2Y6Zm9vcycpLnNob3VsZC5ldmVudHVhbGx5LmVxbChbJ2JhejEnLCAnYmF6MiddKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZ2l2ZSBhIGhpbnQgdG8gdGhlIHBsdWdpbiBhYm91dCB3aGV0aGVyIG11bHRpcGxlIGFyZSByZXF1ZXN0ZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5vcHRzLmN1c3RvbUZpbmRNb2R1bGVzID0ge2Y6IENVU1RPTV9GSU5EX01PRFVMRX07XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksICdmOmZvb3MnKS5zaG91bGQuZXZlbnR1YWxseS5lcWwoJ2JhcjEnKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgYmUgYWJsZSB0byB1c2UgbXVsdGlwbGUgZmluZCBtb2R1bGVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBDVVNUT01fRklORF9NT0RVTEUsIGc6IENVU1RPTV9GSU5EX01PRFVMRX07XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksICdmOmZvbycpLnNob3VsZC5ldmVudHVhbGx5LmVxbCgnYmFyJyk7XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksICdnOmZvbycpLnNob3VsZC5ldmVudHVhbGx5LmVxbCgnYmFyJyk7XG4gIH0pO1xuXG4gIC8vIGVycm9yc1xuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGN1c3RvbUZpbmRNb2R1bGVzIGlzIG5vdCBzZXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksICdmOmZvbycpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvY3VzdG9tRmluZE1vZHVsZXMvKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgY3VzdG9tRmluZE1vZHVsZXMgaXMgdGhlIHdyb25nIHNoYXBlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IENVU1RPTV9GSU5EX01PRFVMRTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgJ2Y6Zm9vJykuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9jdXN0b21GaW5kTW9kdWxlcy8pO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiBjdXN0b21GaW5kTW9kdWxlcyBpcyBzaXplID4gMSBhbmQgbm8gc2VsZWN0b3IgcHJlZml4IGlzIHVzZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5vcHRzLmN1c3RvbUZpbmRNb2R1bGVzID0ge2Y6IENVU1RPTV9GSU5EX01PRFVMRSwgZzogQ1VTVE9NX0ZJTkRfTU9EVUxFfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgJ2ZvbycpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvbXVsdGlwbGUgZWxlbWVudCBmaW5kaW5nL2kpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpbiBhdHRlbXB0IHRvIHVzZSB1bnJlZ2lzdGVyZWQgcGx1Z2luJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiBDVVNUT01fRklORF9NT0RVTEUsIGc6IENVU1RPTV9GSU5EX01PRFVMRX07XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksICd6OmZvbycpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvd2FzIG5vdCByZWdpc3RlcmVkLyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHBsdWdpbiBjYW5ub3QgYmUgbG9hZGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQub3B0cy5jdXN0b21GaW5kTW9kdWxlcyA9IHtmOiAnLi9mb28uanMnfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgJ2Y6Zm9vJykuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9jb3VsZCBub3QgbG9hZC9pKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgcGx1Z2luIGlzIG5vdCB0aGUgcmlnaHQgc2hhcGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5vcHRzLmN1c3RvbUZpbmRNb2R1bGVzID0ge2Y6IEJBRF9DVVNUT01fRklORF9NT0RVTEV9O1xuICAgIGF3YWl0IGQuZmluZEVsZW1lbnQoQ1VTVE9NX1NUUkFURUdZLCAnZjpmb28nKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2NvbnN0cnVjdGVkIGNvcnJlY3RseS9pKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgcGFzcyBvbiBhbiBlcnJvciB0aHJvd24gYnkgdGhlIGZpbmRlciBpdHNlbGYnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5vcHRzLmN1c3RvbUZpbmRNb2R1bGVzID0ge2Y6IENVU1RPTV9GSU5EX01PRFVMRX07XG4gICAgYXdhaXQgZC5maW5kRWxlbWVudChDVVNUT01fU1RSQVRFR1ksICdmOmVycm9yJykuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9wbHVnaW4gZXJyb3IvaSk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHRocm93IG5vIHN1Y2ggZWxlbWVudCBlcnJvciBpZiBlbGVtZW50IG5vdCBmb3VuZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLm9wdHMuY3VzdG9tRmluZE1vZHVsZXMgPSB7ZjogQ1VTVE9NX0ZJTkRfTU9EVUxFfTtcbiAgICBhd2FpdCBkLmZpbmRFbGVtZW50KENVU1RPTV9TVFJBVEVHWSwgJ2Y6bm9wZScpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvY291bGQgbm90IGJlIGxvY2F0ZWQvKTtcbiAgfSk7XG59KTtcbiJdLCJmaWxlIjoidGVzdC9iYXNlZHJpdmVyL2NvbW1hbmRzL2ZpbmQtc3BlY3MuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==
