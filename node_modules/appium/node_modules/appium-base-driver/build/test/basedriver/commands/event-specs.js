"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

var _chai = _interopRequireDefault(require("chai"));

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _2 = require("../../..");

_chai.default.use(_chaiAsPromised.default);

describe('logging custom events', function () {
  it('should allow logging of events', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    await d.logCustomEvent('myorg', 'myevent');

    _lodash.default.keys(d._eventHistory).should.eql(['commands', 'myorg:myevent']);
  });
  it('should get all events including custom ones', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d.logEvent('appiumEvent');
    await d.logCustomEvent('myorg', 'myevent');
    const events = await d.getLogEvents();

    _lodash.default.keys(events).should.eql(['commands', 'appiumEvent', 'myorg:myevent']);
  });
});
describe('#getLogEvents', function () {
  it('should allow to get all events', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents().should.eql({
      commands: [],
      testCommand: ['1', '2', '3']
    });
  });
  it('should filter with testCommand', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents('testCommand').should.eql({
      testCommand: ['1', '2', '3']
    });
  });
  it('should not filter with wrong but can be a part of the event name', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents('testCommandDummy').should.eql({});
  });
  it('should filter with multiple event keys', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    d._eventHistory.testCommand2 = ['4', '5'];
    await d.getLogEvents(['testCommand', 'testCommand2']).should.eql({
      testCommand: ['1', '2', '3'],
      testCommand2: ['4', '5']
    });
  });
  it('should filter with custom events', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory['custom:appiumEvent'] = ['1', '2', '3'];
    await d.getLogEvents(['custom:appiumEvent']).should.eql({
      'custom:appiumEvent': ['1', '2', '3']
    });
  });
  it('should not filter with no existed event name', async function () {
    const d = new _2.BaseDriver();

    d._eventHistory.should.eql({
      commands: []
    });

    d._eventHistory.testCommand = ['1', '2', '3'];
    await d.getLogEvents(['noEventName']).should.eql({});
  });
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYmFzZWRyaXZlci9jb21tYW5kcy9ldmVudC1zcGVjcy5qcyJdLCJuYW1lcyI6WyJjaGFpIiwidXNlIiwiY2hhaUFzUHJvbWlzZWQiLCJkZXNjcmliZSIsIml0IiwiZCIsIkJhc2VEcml2ZXIiLCJfZXZlbnRIaXN0b3J5Iiwic2hvdWxkIiwiZXFsIiwiY29tbWFuZHMiLCJsb2dDdXN0b21FdmVudCIsIl8iLCJrZXlzIiwibG9nRXZlbnQiLCJldmVudHMiLCJnZXRMb2dFdmVudHMiLCJ0ZXN0Q29tbWFuZCIsInRlc3RDb21tYW5kMiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0FBLGNBQUtDLEdBQUwsQ0FBU0MsdUJBQVQ7O0FBRUFDLFFBQVEsQ0FBQyx1QkFBRCxFQUEwQixZQUFZO0FBQzVDQyxFQUFBQSxFQUFFLENBQUMsZ0NBQUQsRUFBbUMsa0JBQWtCO0FBQ3JELFVBQU1DLENBQUMsR0FBRyxJQUFJQyxhQUFKLEVBQVY7O0FBQ0FELElBQUFBLENBQUMsQ0FBQ0UsYUFBRixDQUFnQkMsTUFBaEIsQ0FBdUJDLEdBQXZCLENBQTJCO0FBQUNDLE1BQUFBLFFBQVEsRUFBRTtBQUFYLEtBQTNCOztBQUNBLFVBQU1MLENBQUMsQ0FBQ00sY0FBRixDQUFpQixPQUFqQixFQUEwQixTQUExQixDQUFOOztBQUNBQyxvQkFBRUMsSUFBRixDQUFPUixDQUFDLENBQUNFLGFBQVQsRUFBd0JDLE1BQXhCLENBQStCQyxHQUEvQixDQUFtQyxDQUFDLFVBQUQsRUFBYSxlQUFiLENBQW5DO0FBQ0QsR0FMQyxDQUFGO0FBTUFMLEVBQUFBLEVBQUUsQ0FBQyw2Q0FBRCxFQUFnRCxrQkFBa0I7QUFDbEUsVUFBTUMsQ0FBQyxHQUFHLElBQUlDLGFBQUosRUFBVjs7QUFDQUQsSUFBQUEsQ0FBQyxDQUFDRSxhQUFGLENBQWdCQyxNQUFoQixDQUF1QkMsR0FBdkIsQ0FBMkI7QUFBQ0MsTUFBQUEsUUFBUSxFQUFFO0FBQVgsS0FBM0I7O0FB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QUFOLEVBQVcsR0FBWCxDQUE5QjtBQUNBLFVBQU1aLENBQUMsQ0FBQ1csWUFBRixDQUFlLENBQUMsYUFBRCxDQUFmLEVBQWdDUixNQUFoQyxDQUF1Q0MsR0FBdkMsQ0FBMkMsRUFBM0MsQ0FBTjtBQUNELEdBTEMsQ0FBRjtBQU1ELENBbkRPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgeyBCYXNlRHJpdmVyIH0gZnJvbSAnLi4vLi4vLi4nO1xuXG5cbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxuZGVzY3JpYmUoJ2xvZ2dpbmcgY3VzdG9tIGV2ZW50cycsIGZ1bmN0aW9uICgpIHtcbiAgaXQoJ3Nob3VsZCBhbGxvdyBsb2dnaW5nIG9mIGV2ZW50cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IEJhc2VEcml2ZXIoKTtcbiAgICBkLl9ldmVudEhpc3Rvcnkuc2hvdWxkLmVxbCh7Y29tbWFuZHM6IFtdfSk7XG4gICAgYXdhaXQgZC5sb2dDdXN0b21FdmVudCgnbXlvcmcnLCAnbXlldmVudCcpO1xuICAgIF8ua2V5cyhkLl9ldmVudEhpc3RvcnkpLnNob3VsZC5lcWwoWydjb21tYW5kcycsICdteW9yZzpteWV2ZW50J10pO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBnZXQgYWxsIGV2ZW50cyBpbmNsdWRpbmcgY3VzdG9tIG9uZXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5fZXZlbnRIaXN0b3J5LnNob3VsZC5lcWwoe2NvbW1hbmRzOiBbXX0pO1xuICAgIGQubG9nRXZlbnQoJ2FwcGl1bUV2ZW50Jyk7XG4gICAgYXdhaXQgZC5sb2dDdXN0b21FdmVudCgnbXlvcmcnLCAnbXlldmVudCcpO1xuICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGQuZ2V0TG9nRXZlbnRzKCk7XG4gICAgXy5rZXlzKGV2ZW50cykuc2hvdWxkLmVxbChbJ2NvbW1hbmRzJywgJ2FwcGl1bUV2ZW50JywgJ215b3JnOm15ZXZlbnQnXSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCcjZ2V0TG9nRXZlbnRzJywgZnVuY3Rpb24gKCkge1xuICBpdCgnc2hvdWxkIGFsbG93IHRvIGdldCBhbGwgZXZlbnRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoKS5zaG91bGQuZXFsKHtcbiAgICAgIGNvbW1hbmRzOiBbXSwgdGVzdENvbW1hbmQ6IFsnMScsICcyJywgJzMnXVxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZpbHRlciB3aXRoIHRlc3RDb21tYW5kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoJ3Rlc3RDb21tYW5kJykuc2hvdWxkLmVxbCh7XG4gICAgICB0ZXN0Q29tbWFuZDogWycxJywgJzInLCAnMyddXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm90IGZpbHRlciB3aXRoIHdyb25nIGJ1dCBjYW4gYmUgYSBwYXJ0IG9mIHRoZSBldmVudCBuYW1lJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoJ3Rlc3RDb21tYW5kRHVtbXknKS5zaG91bGQuZXFsKHt9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmaWx0ZXIgd2l0aCBtdWx0aXBsZSBldmVudCBrZXlzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnkudGVzdENvbW1hbmQgPSBbJzEnLCAnMicsICczJ107XG4gICAgZC5fZXZlbnRIaXN0b3J5LnRlc3RDb21tYW5kMiA9IFsnNCcsICc1J107XG4gICAgYXdhaXQgZC5nZXRMb2dFdmVudHMoWyd0ZXN0Q29tbWFuZCcsICd0ZXN0Q29tbWFuZDInXSkuc2hvdWxkLmVxbCh7XG4gICAgICB0ZXN0Q29tbWFuZDogWycxJywgJzInLCAnMyddLCB0ZXN0Q29tbWFuZDI6IFsnNCcsICc1J11cbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmaWx0ZXIgd2l0aCBjdXN0b20gZXZlbnRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgQmFzZURyaXZlcigpO1xuICAgIGQuX2V2ZW50SGlzdG9yeS5zaG91bGQuZXFsKHtjb21tYW5kczogW119KTtcbiAgICBkLl9ldmVudEhpc3RvcnlbJ2N1c3RvbTphcHBpdW1FdmVudCddID0gWycxJywgJzInLCAnMyddO1xuICAgIGF3YWl0IGQuZ2V0TG9nRXZlbnRzKFsnY3VzdG9tOmFwcGl1bUV2ZW50J10pLnNob3VsZC5lcWwoe1xuICAgICAgJ2N1c3RvbTphcHBpdW1FdmVudCc6IFsnMScsICcyJywgJzMnXVxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG5vdCBmaWx0ZXIgd2l0aCBubyBleGlzdGVkIGV2ZW50IG5hbWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZCA9IG5ldyBCYXNlRHJpdmVyKCk7XG4gICAgZC5fZXZlbnRIaXN0b3J5LnNob3VsZC5lcWwoe2NvbW1hbmRzOiBbXX0pO1xuICAgIGQuX2V2ZW50SGlzdG9yeS50ZXN0Q29tbWFuZCA9IFsnMScsICcyJywgJzMnXTtcbiAgICBhd2FpdCBkLmdldExvZ0V2ZW50cyhbJ25vRXZlbnROYW1lJ10pLnNob3VsZC5lcWwoe30pO1xuICB9KTtcbn0pO1xuIl0sImZpbGUiOiJ0ZXN0L2Jhc2Vkcml2ZXIvY29tbWFuZHMvZXZlbnQtc3BlY3MuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==
