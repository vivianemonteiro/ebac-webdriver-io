"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatCapsForServer = formatCapsForServer;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

const GECKO_CAP_PREFIXES = ['moz:'];
const STANDARD_CAPS = ['browserVersion', 'platformName', 'acceptInsecureCerts', 'pageLoadStrategy', 'proxy', 'setWindowRect', 'timeouts', 'unhandledPromptBehavior'];

function formatCapsForServer(caps) {
  const result = {};

  if (caps.browserName) {
    result.browserName = 'firefox';
  }

  for (const [name, value] of _lodash.default.toPairs(caps)) {
    if (GECKO_CAP_PREFIXES.some(prefix => name.startsWith(prefix)) || STANDARD_CAPS.includes(name)) {
      result[name] = value;
    }
  }

  if (result.platformName) {
    result.platformName = _lodash.default.toLower(result.platformName);
  }

  return result;
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi91dGlscy5qcyJdLCJuYW1lcyI6WyJHRUNLT19DQVBfUFJFRklYRVMiLCJTVEFOREFSRF9DQVBTIiwiZm9ybWF0Q2Fwc0ZvclNlcnZlciIsImNhcHMiLCJyZXN1bHQiLCJicm93c2VyTmFtZSIsIm5hbWUiLCJ2YWx1ZSIsIl8iLCJ0b1BhaXJzIiwic29tZSIsInByZWZpeCIsInN0YXJ0c1dpdGgiLCJpbmNsdWRlcyIsInBsYXRmb3JtTmFtZSIsInRvTG93ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsa0JBQWtCLEdBQUcsQ0FBQyxNQUFELENBQTNCO0FBRUEsTUFBTUMsYUFBYSxHQUFHLENBQ3BCLGdCQURvQixFQUVwQixjQUZvQixFQUdwQixxQkFIb0IsRUFJcEIsa0JBSm9CLEVBS3BCLE9BTG9CLEVBTXBCLGVBTm9CLEVBT3BCLFVBUG9CLEVBUXBCLHlCQVJvQixDQUF0Qjs7QUFXQSxTQUFTQyxtQkFBVCxDQUE4QkMsSUFBOUIsRUFBb0M7QUFDbEMsUUFBTUMsTUFBTSxHQUFHLEVBQWY7O0FBQ0EsTUFBSUQsSUFBSSxDQUFDRSxXQUFULEVBQXNCO0FBQ3BCRCxJQUFBQSxNQUFNLENBQUNDLFdBQVAsR0FBcUIsU0FBckI7QUFDRDs7QUFDRCxPQUFLLE1BQU0sQ0FBQ0MsSUFBRCxFQUFPQyxLQUFQLENBQVgsSUFBNEJDLGdCQUFFQyxPQUFGLENBQVVOLElBQVYsQ0FBNUIsRUFBNkM7QUFDM0MsUUFBSUgsa0JBQWtCLENBQUNVLElBQW5CLENBQXlCQyxNQUFELElBQVlMLElBQUksQ0FBQ00sVUFBTCxDQUFnQkQsTUFBaEIsQ0FBcEMsS0FBZ0VWLGFBQWEsQ0FBQ1ksUUFBZCxDQUF1QlAsSUFBdkIsQ0FBcEUsRUFBa0c7QUFDaEdGLE1BQUFBLE1BQU0sQ0FBQ0UsSUFBRCxDQUFOLEdBQWVDLEtBQWY7QUFDRDtBQUNGOztBQUNELE1BQUlILE1BQU0sQ0FBQ1UsWUFBWCxFQUF5QjtBQUV2QlYsSUFBQUEsTUFBTSxDQUFDVSxZQUFQLEdBQXNCTixnQkFBRU8sT0FBRixDQUFVWCxNQUFNLENBQUNVLFlBQWpCLENBQXRCO0FBQ0Q7O0FBQ0QsU0FBT1YsTUFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgR0VDS09fQ0FQX1BSRUZJWEVTID0gWydtb3o6J107XG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvd2ViZHJpdmVyLyNjYXBhYmlsaXRpZXNcbmNvbnN0IFNUQU5EQVJEX0NBUFMgPSBbXG4gICdicm93c2VyVmVyc2lvbicsXG4gICdwbGF0Zm9ybU5hbWUnLFxuICAnYWNjZXB0SW5zZWN1cmVDZXJ0cycsXG4gICdwYWdlTG9hZFN0cmF0ZWd5JyxcbiAgJ3Byb3h5JyxcbiAgJ3NldFdpbmRvd1JlY3QnLFxuICAndGltZW91dHMnLFxuICAndW5oYW5kbGVkUHJvbXB0QmVoYXZpb3InLFxuXTtcblxuZnVuY3Rpb24gZm9ybWF0Q2Fwc0ZvclNlcnZlciAoY2Fwcykge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgaWYgKGNhcHMuYnJvd3Nlck5hbWUpIHtcbiAgICByZXN1bHQuYnJvd3Nlck5hbWUgPSAnZmlyZWZveCc7XG4gIH1cbiAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIF8udG9QYWlycyhjYXBzKSkge1xuICAgIGlmIChHRUNLT19DQVBfUFJFRklYRVMuc29tZSgocHJlZml4KSA9PiBuYW1lLnN0YXJ0c1dpdGgocHJlZml4KSkgfHwgU1RBTkRBUkRfQ0FQUy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgcmVzdWx0W25hbWVdID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIGlmIChyZXN1bHQucGxhdGZvcm1OYW1lKSB7XG4gICAgLy8gR2Vja29kcml2ZXIgb25seSBzdXBwb3J0cyBsb3dlcmNhc2UgcGxhdGZvcm0gbmFtZXNcbiAgICByZXN1bHQucGxhdGZvcm1OYW1lID0gXy50b0xvd2VyKHJlc3VsdC5wbGF0Zm9ybU5hbWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IGZvcm1hdENhcHNGb3JTZXJ2ZXIgfTtcbiJdLCJmaWxlIjoibGliL3V0aWxzLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=
