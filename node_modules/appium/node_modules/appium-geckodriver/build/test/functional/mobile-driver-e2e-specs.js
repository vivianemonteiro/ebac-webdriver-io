"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _wd = _interopRequireDefault(require("wd"));

var _ = require("../..");

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _chai = _interopRequireDefault(require("chai"));

var _utils = require("../utils");

_chai.default.should();

_chai.default.use(_chaiAsPromised.default);

const DEVICE_NAME = process.env.DEVICE_NAME || 'emulator-5554';
const CAPS = {
  platformName: 'linux',
  verbosity: 'trace',
  'moz:firefoxOptions': {
    androidDeviceSerial: DEVICE_NAME,
    androidPackage: 'org.mozilla.firefox'
  },
  androidStorage: 'internal'
};
describe('Mobile GeckoDriver', function () {
  this.timeout(_utils.MOCHA_TIMEOUT);
  let server;
  let driver;
  before(async function () {
    if (process.env.CI) {
      return this.skip();
    }

    server = await (0, _.startServer)(_utils.PORT, _utils.HOST);
  });
  after(async function () {
    if (server) {
      await server.close();
      server = null;
    }
  });
  beforeEach(async function () {
    driver = _wd.default.promiseChainRemote(_utils.HOST, _utils.PORT);
    await driver.init(CAPS);
  });
  afterEach(async function () {
    if (driver) {
      await driver.quit();
      driver = null;
    }
  });
  it('should start and stop a session', async function () {
    await driver.get('https://appium.io/');
    const button = await driver.elementByCss('#downloadLink');
    await button.text().should.eventually.eql('Download Appium');
  });
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZnVuY3Rpb25hbC9tb2JpbGUtZHJpdmVyLWUyZS1zcGVjcy5qcyJdLCJuYW1lcyI6WyJjaGFpIiwic2hvdWxkIiwidXNlIiwiY2hhaUFzUHJvbWlzZWQiLCJERVZJQ0VfTkFNRSIsInByb2Nlc3MiLCJlbnYiLCJDQVBTIiwicGxhdGZvcm1OYW1lIiwidmVyYm9zaXR5IiwiYW5kcm9pZERldmljZVNlcmlhbCIsImFuZHJvaWRQYWNrYWdlIiwiYW5kcm9pZFN0b3JhZ2UiLCJkZXNjcmliZSIsInRpbWVvdXQiLCJNT0NIQV9USU1FT1VUIiwic2VydmVyIiwiZHJpdmVyIiwiYmVmb3JlIiwiQ0kiLCJza2lwIiwiUE9SVCIsIkhPU1QiLCJhZnRlciIsImNsb3NlIiwiYmVmb3JlRWFjaCIsIndkIiwicHJvbWlzZUNoYWluUmVtb3RlIiwiaW5pdCIsImFmdGVyRWFjaCIsInF1aXQiLCJpdCIsImdldCIsImJ1dHRvbiIsImVsZW1lbnRCeUNzcyIsInRleHQiLCJldmVudHVhbGx5IiwiZXFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQUEsY0FBS0MsTUFBTDs7QUFDQUQsY0FBS0UsR0FBTCxDQUFTQyx1QkFBVDs7QUFFQSxNQUFNQyxXQUFXLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixXQUFaLElBQTJCLGVBQS9DO0FBRUEsTUFBTUcsSUFBSSxHQUFHO0FBQ1hDLEVBQUFBLFlBQVksRUFBRSxPQURIO0FBR1hDLEVBQUFBLFNBQVMsRUFBRSxPQUhBO0FBSVgsd0JBQXNCO0FBQ3BCQyxJQUFBQSxtQkFBbUIsRUFBRU4sV0FERDtBQUVwQk8sSUFBQUEsY0FBYyxFQUFFO0FBRkksR0FKWDtBQVFYQyxFQUFBQSxjQUFjLEVBQUU7QUFSTCxDQUFiO0FBV0FDLFFBQVEsQ0FBQyxvQkFBRCxFQUF1QixZQUFZO0FBQ3pDLE9BQUtDLE9BQUwsQ0FBYUMsb0JBQWI7QUFFQSxNQUFJQyxNQUFKO0FBQ0EsTUFBSUMsTUFBSjtBQUNBQyxFQUFBQSxNQUFNLENBQUMsa0JBQWtCO0FBQ3ZCLFFBQUliLE9BQU8sQ0FBQ0MsR0FBUixDQUFZYSxFQUFoQixFQUFvQjtBQUVsQixhQUFPLEtBQUtDLElBQUwsRUFBUDtBQUNEOztBQUNESixJQUFBQSxNQUFNLEdBQUcsTUFBTSxtQkFBWUssV0FBWixFQUFrQkMsV0FBbEIsQ0FBZjtBQUNELEdBTkssQ0FBTjtBQU9BQyxFQUFBQSxLQUFLLENBQUMsa0JBQWtCO0FBQ3RCLFFBQUlQLE1BQUosRUFBWTtBQUNWLFlBQU1BLE1BQU0sQ0FBQ1EsS0FBUCxFQUFOO0FBQ0FSLE1BQUFBLE1BQU0sR0FBRyxJQUFUO0FBQ0Q7QUFDRixHQUxJLENBQUw7QUFNQVMsRUFBQUEsVUFBVSxDQUFDLGtCQUFrQjtBQUMzQlIsSUFBQUEsTUFBTSxHQUFHUyxZQUFHQyxrQkFBSCxDQUFzQkwsV0FBdEIsRUFBNEJELFdBQTVCLENBQVQ7QUFDQSxVQUFNSixNQUFNLENBQUNXLElBQVAsQ0FBWXJCLElBQVosQ0FBTjtBQUNELEdBSFMsQ0FBVjtBQUlBc0IsRUFBQUEsU0FBUyxDQUFDLGtCQUFrQjtBQUMxQixRQUFJWixNQUFKLEVBQVk7QUFDVixZQUFNQSxNQUFNLENBQUNhLElBQVAsRUFBTjtBQUNBYixNQUFBQSxNQUFNLEdBQUcsSUFBVDtBQUNEO0FBQ0YsR0FMUSxDQUFUO0FBT0FjLEVBQUFBLEVBQUUsQ0FBQyxpQ0FBRCxFQUFvQyxrQkFBa0I7QUFDdEQsVUFBTWQsTUFBTSxDQUFDZSxHQUFQLENBQVcsb0JBQVgsQ0FBTjtBQUNBLFVBQU1DLE1BQU0sR0FBRyxNQUFNaEIsTUFBTSxDQUFDaUIsWUFBUCxDQUFvQixlQUFwQixDQUFyQjtBQUNBLFVBQU1ELE1BQU0sQ0FBQ0UsSUFBUCxHQUFjbEMsTUFBZCxDQUFxQm1DLFVBQXJCLENBQWdDQyxHQUFoQyxDQUFvQyxpQkFBcEMsQ0FBTjtBQUNELEdBSkMsQ0FBRjtBQUtELENBbENPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2QgZnJvbSAnd2QnO1xuaW1wb3J0IHsgc3RhcnRTZXJ2ZXIgfSBmcm9tICcuLi8uLic7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCB7IEhPU1QsIFBPUlQsIE1PQ0hBX1RJTUVPVVQgfSBmcm9tICcuLi91dGlscyc7XG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmNvbnN0IERFVklDRV9OQU1FID0gcHJvY2Vzcy5lbnYuREVWSUNFX05BTUUgfHwgJ2VtdWxhdG9yLTU1NTQnO1xuLy8gVGhlIEZpcmVmb3ggYmluYXJ5IGNvdWxkIGJlIHJldHJpZXZlZCBmcm9tIGh0dHBzOi8vd3d3Lm1vemlsbGEub3JnL2VuLUdCL2ZpcmVmb3gvYWxsLyNwcm9kdWN0LWFuZHJvaWQtcmVsZWFzZVxuY29uc3QgQ0FQUyA9IHtcbiAgcGxhdGZvcm1OYW1lOiAnbGludXgnLFxuICAvLyBwbGF0Zm9ybU5hbWU6ICdtYWMnLFxuICB2ZXJib3NpdHk6ICd0cmFjZScsXG4gICdtb3o6ZmlyZWZveE9wdGlvbnMnOiB7XG4gICAgYW5kcm9pZERldmljZVNlcmlhbDogREVWSUNFX05BTUUsXG4gICAgYW5kcm9pZFBhY2thZ2U6ICdvcmcubW96aWxsYS5maXJlZm94JyxcbiAgfSxcbiAgYW5kcm9pZFN0b3JhZ2U6ICdpbnRlcm5hbCcsXG59O1xuXG5kZXNjcmliZSgnTW9iaWxlIEdlY2tvRHJpdmVyJywgZnVuY3Rpb24gKCkge1xuICB0aGlzLnRpbWVvdXQoTU9DSEFfVElNRU9VVCk7XG5cbiAgbGV0IHNlcnZlcjtcbiAgbGV0IGRyaXZlcjtcbiAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuQ0kpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgYSB3YXkgdG8gcnVuIHRoaXMgb24gQXp1cmVcbiAgICAgIHJldHVybiB0aGlzLnNraXAoKTtcbiAgICB9XG4gICAgc2VydmVyID0gYXdhaXQgc3RhcnRTZXJ2ZXIoUE9SVCwgSE9TVCk7XG4gIH0pO1xuICBhZnRlcihhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNlcnZlcikge1xuICAgICAgYXdhaXQgc2VydmVyLmNsb3NlKCk7XG4gICAgICBzZXJ2ZXIgPSBudWxsO1xuICAgIH1cbiAgfSk7XG4gIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGRyaXZlciA9IHdkLnByb21pc2VDaGFpblJlbW90ZShIT1NULCBQT1JUKTtcbiAgICBhd2FpdCBkcml2ZXIuaW5pdChDQVBTKTtcbiAgfSk7XG4gIGFmdGVyRWFjaChhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGRyaXZlcikge1xuICAgICAgYXdhaXQgZHJpdmVyLnF1aXQoKTtcbiAgICAgIGRyaXZlciA9IG51bGw7XG4gICAgfVxuICB9KTtcblxuICBpdCgnc2hvdWxkIHN0YXJ0IGFuZCBzdG9wIGEgc2Vzc2lvbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBhd2FpdCBkcml2ZXIuZ2V0KCdodHRwczovL2FwcGl1bS5pby8nKTtcbiAgICBjb25zdCBidXR0b24gPSBhd2FpdCBkcml2ZXIuZWxlbWVudEJ5Q3NzKCcjZG93bmxvYWRMaW5rJyk7XG4gICAgYXdhaXQgYnV0dG9uLnRleHQoKS5zaG91bGQuZXZlbnR1YWxseS5lcWwoJ0Rvd25sb2FkIEFwcGl1bScpO1xuICB9KTtcbn0pO1xuXG5cbiJdLCJmaWxlIjoidGVzdC9mdW5jdGlvbmFsL21vYmlsZS1kcml2ZXItZTJlLXNwZWNzLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
