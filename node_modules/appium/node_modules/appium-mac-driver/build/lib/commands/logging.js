"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _logger = _interopRequireDefault(require("../logger"));

var _lodash = _interopRequireDefault(require("lodash"));

const GET_SERVER_LOGS_FEATURE = 'get_server_logs';
const extensions = {};
extensions.supportedLogTypes = {
  server: {
    description: 'Appium server logs',
    getter: self => {
      self.ensureFeatureEnabled(GET_SERVER_LOGS_FEATURE);
      return _logger.default.unwrap().record.map(function (x) {
        return {
          timestamp: Date.now(),
          level: 'ALL',
          message: _lodash.default.isEmpty(x.prefix) ? x.message : `[${x.prefix}] ${x.message}`
        };
      });
    }
  }
};
Object.assign(extensions);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9sb2dnaW5nLmpzIl0sIm5hbWVzIjpbIkdFVF9TRVJWRVJfTE9HU19GRUFUVVJFIiwiZXh0ZW5zaW9ucyIsInN1cHBvcnRlZExvZ1R5cGVzIiwic2VydmVyIiwiZGVzY3JpcHRpb24iLCJnZXR0ZXIiLCJzZWxmIiwiZW5zdXJlRmVhdHVyZUVuYWJsZWQiLCJsb2dnZXIiLCJ1bndyYXAiLCJyZWNvcmQiLCJtYXAiLCJ4IiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImxldmVsIiwibWVzc2FnZSIsIl8iLCJpc0VtcHR5IiwicHJlZml4IiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBLE1BQU1BLHVCQUF1QixHQUFHLGlCQUFoQztBQUVBLE1BQU1DLFVBQVUsR0FBRyxFQUFuQjtBQUVBQSxVQUFVLENBQUNDLGlCQUFYLEdBQStCO0FBQzdCQyxFQUFBQSxNQUFNLEVBQUU7QUFDTkMsSUFBQUEsV0FBVyxFQUFFLG9CQURQO0FBRU5DLElBQUFBLE1BQU0sRUFBR0MsSUFBRCxJQUFVO0FBQ2hCQSxNQUFBQSxJQUFJLENBQUNDLG9CQUFMLENBQTBCUCx1QkFBMUI7QUFDQSxhQUFPUSxnQkFBT0MsTUFBUCxHQUFnQkMsTUFBaEIsQ0FDSkMsR0FESSxDQUNBLFVBQVVDLENBQVYsRUFBYTtBQUNoQixlQUFPO0FBRUxDLFVBQUFBLFNBQVMsRUFBRUMsSUFBSSxDQUFDQyxHQUFMLEVBRk47QUFHTEMsVUFBQUEsS0FBSyxFQUFFLEtBSEY7QUFJTEMsVUFBQUEsT0FBTyxFQUFFQyxnQkFBRUMsT0FBRixDQUFVUCxDQUFDLENBQUNRLE1BQVosSUFBc0JSLENBQUMsQ0FBQ0ssT0FBeEIsR0FBbUMsSUFBR0wsQ0FBQyxDQUFDUSxNQUFPLEtBQUlSLENBQUMsQ0FBQ0ssT0FBUTtBQUpqRSxTQUFQO0FBTUQsT0FSSSxDQUFQO0FBU0Q7QUFiSztBQURxQixDQUEvQjtBQWtCQUksTUFBTSxDQUFDQyxNQUFQLENBQWNyQixVQUFkO2VBRWVBLFUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5jb25zdCBHRVRfU0VSVkVSX0xPR1NfRkVBVFVSRSA9ICdnZXRfc2VydmVyX2xvZ3MnO1xuXG5jb25zdCBleHRlbnNpb25zID0ge307XG5cbmV4dGVuc2lvbnMuc3VwcG9ydGVkTG9nVHlwZXMgPSB7XG4gIHNlcnZlcjoge1xuICAgIGRlc2NyaXB0aW9uOiAnQXBwaXVtIHNlcnZlciBsb2dzJyxcbiAgICBnZXR0ZXI6IChzZWxmKSA9PiB7XG4gICAgICBzZWxmLmVuc3VyZUZlYXR1cmVFbmFibGVkKEdFVF9TRVJWRVJfTE9HU19GRUFUVVJFKTtcbiAgICAgIHJldHVybiBsb2dnZXIudW53cmFwKCkucmVjb3JkXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gbnBtbG9nIGRvZXMgbm90IGtlZXAgdGltZXN0YW1wcyBpbiB0aGUgaGlzdG9yeVxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbGV2ZWw6ICdBTEwnLFxuICAgICAgICAgICAgbWVzc2FnZTogXy5pc0VtcHR5KHgucHJlZml4KSA/IHgubWVzc2FnZSA6IGBbJHt4LnByZWZpeH1dICR7eC5tZXNzYWdlfWAsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgfSxcbn07XG5cbk9iamVjdC5hc3NpZ24oZXh0ZW5zaW9ucyk7XG5cbmV4cG9ydCBkZWZhdWx0IGV4dGVuc2lvbnM7XG4iXSwiZmlsZSI6ImxpYi9jb21tYW5kcy9sb2dnaW5nLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uIn0=
