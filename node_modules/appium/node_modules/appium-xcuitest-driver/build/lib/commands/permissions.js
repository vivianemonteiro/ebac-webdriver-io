"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.helpers = exports.default = exports.commands = void 0;

require("source-map-support/register");

var _lodash = _interopRequireDefault(require("lodash"));

const commands = {},
      helpers = {},
      extensions = {};
exports.helpers = helpers;
exports.commands = commands;
const RESOURCE_NAME_TO_ID_MAP = {
  calendar: 2,
  camera: 6,
  contacts: 1,
  health: -0x40000003,
  homekit: 8,
  keyboardnet: -0x40000001,
  location: -0x40000002,
  medialibrary: 7,
  microphone: 5,
  photos: 4,
  reminders: 3,
  systemroot: 0x40000000,
  userdesktop: 0x40000001,
  userdocuments: 0x40000003,
  userdownloads: 0x40000002,
  bluetooth: -0x40000000
};

function requireSimulator(driver) {
  if (!driver.isSimulator()) {
    throw new Error('Permissions-related operations can only be performed on Simulator');
  }
}

function requireOptions(opts = {}) {
  if (!opts.bundleId) {
    throw new Error(`The 'bundleId' options must be a valid application bundle identifier`);
  }

  return opts;
}

commands.mobileResetPermission = async function mobileResetPermission(opts = {}) {
  const {
    service
  } = opts;

  if (!service) {
    throw new Error(`The 'service' option is expected to be present`);
  }

  let resource;

  if (_lodash.default.isString(service)) {
    resource = RESOURCE_NAME_TO_ID_MAP[_lodash.default.toLower(service)];

    if (!resource) {
      throw new Error(`The 'service' value must be one of ` + `${JSON.stringify(_lodash.default.keys(RESOURCE_NAME_TO_ID_MAP))}`);
    }
  } else if (_lodash.default.isInteger(service)) {
    resource = service;
  } else {
    throw new Error(`The 'service' value must be either a string or an integer. ` + `'${service}' is passed instead`);
  }

  await this.proxyCommand('/wda/resetAppAuth', 'POST', {
    resource
  });
};

commands.mobileGetPermission = async function mobileGetPermission(opts = {}) {
  const {
    service,
    bundleId
  } = requireOptions(opts);

  if (!service) {
    throw new Error(`The 'service' option is expected to be present`);
  }

  requireSimulator(this);
  return await this.opts.device.getPermission(bundleId, service);
};

commands.mobileSetPermissions = async function mobileSetPermissions(opts = {}) {
  const {
    access,
    bundleId
  } = requireOptions(opts);

  if (!_lodash.default.isPlainObject(access)) {
    throw new Error(`The 'access' option is expected to be a map`);
  }

  requireSimulator(this);
  await this.opts.device.setPermissions(bundleId, access);
};

Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9wZXJtaXNzaW9ucy5qcyJdLCJuYW1lcyI6WyJjb21tYW5kcyIsImhlbHBlcnMiLCJleHRlbnNpb25zIiwiUkVTT1VSQ0VfTkFNRV9UT19JRF9NQVAiLCJjYWxlbmRhciIsImNhbWVyYSIsImNvbnRhY3RzIiwiaGVhbHRoIiwiaG9tZWtpdCIsImtleWJvYXJkbmV0IiwibG9jYXRpb24iLCJtZWRpYWxpYnJhcnkiLCJtaWNyb3Bob25lIiwicGhvdG9zIiwicmVtaW5kZXJzIiwic3lzdGVtcm9vdCIsInVzZXJkZXNrdG9wIiwidXNlcmRvY3VtZW50cyIsInVzZXJkb3dubG9hZHMiLCJibHVldG9vdGgiLCJyZXF1aXJlU2ltdWxhdG9yIiwiZHJpdmVyIiwiaXNTaW11bGF0b3IiLCJFcnJvciIsInJlcXVpcmVPcHRpb25zIiwib3B0cyIsImJ1bmRsZUlkIiwibW9iaWxlUmVzZXRQZXJtaXNzaW9uIiwic2VydmljZSIsInJlc291cmNlIiwiXyIsImlzU3RyaW5nIiwidG9Mb3dlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJrZXlzIiwiaXNJbnRlZ2VyIiwicHJveHlDb21tYW5kIiwibW9iaWxlR2V0UGVybWlzc2lvbiIsImRldmljZSIsImdldFBlcm1pc3Npb24iLCJtb2JpbGVTZXRQZXJtaXNzaW9ucyIsImFjY2VzcyIsImlzUGxhaW5PYmplY3QiLCJzZXRQZXJtaXNzaW9ucyIsIk9iamVjdCIsImFzc2lnbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFHQSxNQUFNQSxRQUFRLEdBQUcsRUFBakI7QUFBQSxNQUFxQkMsT0FBTyxHQUFHLEVBQS9CO0FBQUEsTUFBbUNDLFVBQVUsR0FBRyxFQUFoRDs7O0FBR0EsTUFBTUMsdUJBQXVCLEdBQUc7QUFDOUJDLEVBQUFBLFFBQVEsRUFBRSxDQURvQjtBQUU5QkMsRUFBQUEsTUFBTSxFQUFFLENBRnNCO0FBRzlCQyxFQUFBQSxRQUFRLEVBQUUsQ0FIb0I7QUFJOUJDLEVBQUFBLE1BQU0s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O0FBQzlFLFFBQU07QUFDSmlCLElBQUFBLE1BREk7QUFFSmhCLElBQUFBO0FBRkksTUFHRkYsY0FBYyxDQUFDQyxJQUFELENBSGxCOztBQUlBLE1BQUksQ0FBQ0ssZ0JBQUVhLGFBQUYsQ0FBZ0JELE1BQWhCLENBQUwsRUFBOEI7QUFDNUIsVUFBTSxJQUFJbkIsS0FBSixDQUFXLDZDQUFYLENBQU47QUFDRDs7QUFDREgsRUFBQUEsZ0JBQWdCLENBQUMsSUFBRCxDQUFoQjtBQUVBLFFBQU0sS0FBS0ssSUFBTCxDQUFVYyxNQUFWLENBQWlCSyxjQUFqQixDQUFnQ2xCLFFBQWhDLEVBQTBDZ0IsTUFBMUMsQ0FBTjtBQUNELENBWEQ7O0FBY0FHLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjNUMsVUFBZCxFQUEwQkYsUUFBMUIsRUFBb0NDLE9BQXBDO2VBRWVDLFUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5cbmNvbnN0IGNvbW1hbmRzID0ge30sIGhlbHBlcnMgPSB7fSwgZXh0ZW5zaW9ucyA9IHt9O1xuXG4vLyBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vZG9jdW1lbnRhdGlvbi94Y3Rlc3QveGN1aXByb3RlY3RlZHJlc291cmNlP2xhbmd1YWdlPW9iamNcbmNvbnN0IFJFU09VUkNFX05BTUVfVE9fSURfTUFQID0ge1xuICBjYWxlbmRhcjogMixcbiAgY2FtZXJhOiA2LFxuICBjb250YWN0czogMSxcbiAgaGVhbHRoOiAtMHg0MDAwMDAwMyxcbiAgaG9tZWtpdDogOCxcbiAga2V5Ym9hcmRuZXQ6IC0weDQwMDAwMDAxLFxuICBsb2NhdGlvbjogLTB4NDAwMDAwMDIsXG4gIG1lZGlhbGlicmFyeTogNyxcbiAgbWljcm9waG9uZTogNSxcbiAgcGhvdG9zOiA0LFxuICByZW1pbmRlcnM6IDMsXG4gIHN5c3RlbXJvb3Q6IDB4NDAwMDAwMDAsXG4gIHVzZXJkZXNrdG9wOiAweDQwMDAwMDAxLFxuICB1c2VyZG9jdW1lbnRzOiAweDQwMDAwMDAzLFxuICB1c2VyZG93bmxvYWRzOiAweDQwMDAwMDAyLFxuICBibHVldG9vdGg6IC0weDQwMDAwMDAwLFxufTtcblxuZnVuY3Rpb24gcmVxdWlyZVNpbXVsYXRvciAoZHJpdmVyKSB7XG4gIGlmICghZHJpdmVyLmlzU2ltdWxhdG9yKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Blcm1pc3Npb25zLXJlbGF0ZWQgb3BlcmF0aW9ucyBjYW4gb25seSBiZSBwZXJmb3JtZWQgb24gU2ltdWxhdG9yJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVxdWlyZU9wdGlvbnMgKG9wdHMgPSB7fSkge1xuICBpZiAoIW9wdHMuYnVuZGxlSWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSAnYnVuZGxlSWQnIG9wdGlvbnMgbXVzdCBiZSBhIHZhbGlkIGFwcGxpY2F0aW9uIGJ1bmRsZSBpZGVudGlmaWVyYCk7XG4gIH1cbiAgcmV0dXJuIG9wdHM7XG59XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBSZXNldFBlcm1pc3Npb25PcHRpb25zXG4gKlxuICogQHByb3BlcnR5IHshc3RyaW5nfG51bWJlcn0gc2VydmljZSAtIE9uZSBvZiBhdmFpbGFibGUgc2VydmljZSBuYW1lcy4gU2VlIHRoZSBrZXlzIG9mXG4gKiBgUkVTT1VSQ0VfTkFNRV9UT19JRF9NQVBgIHRvIGdldCB0aGUgbGlzdCBvZiBzdXBwb3J0ZWQgc2VydmljZSBuYW1lcy5cbiAqIFRoaXMgY291bGQgYWxzbyBiZSBhbiBpbnRlZ2VyIHByb3RlY3RlZCByZXNvdXJjZSBpZGVudGlmaWVyIHRha2VuIGZyb21cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9kb2N1bWVudGF0aW9uL3hjdGVzdC94Y3VpcHJvdGVjdGVkcmVzb3VyY2U/bGFuZ3VhZ2U9b2JqY1xuICovXG5cbi8qKlxuICogUmVzZXRzIHRoZSBnaXZlbiBwZXJtaXNzaW9uIGZvciB0aGUgYWN0aXZlIGFwcGxpY2F0aW9uIHVuZGVyIHRlc3QuXG4gKiBXb3JrcyBmb3IgYm90aCBTaW11bGF0b3IgYW5kIHJlYWwgZGV2aWNlcyB1c2luZyBYY29kZSBTREsgMTEuNCtcbiAqXG4gKiBAcGFyYW0ge1Jlc2V0UGVybWlzc2lvbk9wdGlvbnN9IG9wdHMgLSBQZXJtaXNzaW9uIG9wdGlvbnMuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgcGVybWlzc2lvbiByZXNldCBmYWlscyBvbiB0aGUgZGV2aWNlLlxuICovXG5jb21tYW5kcy5tb2JpbGVSZXNldFBlcm1pc3Npb24gPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVSZXNldFBlcm1pc3Npb24gKG9wdHMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgc2VydmljZSxcbiAgfSA9IG9wdHM7XG4gIGlmICghc2VydmljZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlICdzZXJ2aWNlJyBvcHRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgcHJlc2VudGApO1xuICB9XG4gIGxldCByZXNvdXJjZTtcbiAgaWYgKF8uaXNTdHJpbmcoc2VydmljZSkpIHtcbiAgICByZXNvdXJjZSA9IFJFU09VUkNFX05BTUVfVE9fSURfTUFQW18udG9Mb3dlcihzZXJ2aWNlKV07XG4gICAgaWYgKCFyZXNvdXJjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgJ3NlcnZpY2UnIHZhbHVlIG11c3QgYmUgb25lIG9mIGAgK1xuICAgICAgICBgJHtKU09OLnN0cmluZ2lmeShfLmtleXMoUkVTT1VSQ0VfTkFNRV9UT19JRF9NQVApKX1gKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXy5pc0ludGVnZXIoc2VydmljZSkpIHtcbiAgICByZXNvdXJjZSA9IHNlcnZpY2U7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgJ3NlcnZpY2UnIHZhbHVlIG11c3QgYmUgZWl0aGVyIGEgc3RyaW5nIG9yIGFuIGludGVnZXIuIGAgK1xuICAgICAgYCcke3NlcnZpY2V9JyBpcyBwYXNzZWQgaW5zdGVhZGApO1xuICB9XG5cbiAgYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy93ZGEvcmVzZXRBcHBBdXRoJywgJ1BPU1QnLCB7cmVzb3VyY2V9KTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gR2V0UGVybWlzc2lvbk9wdGlvbnNcbiAqXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc2VydmljZSAtIE9uZSBvZiBhdmFpbGFibGUgc2VydmljZSBuYW1lcy4gVGhlIGZvbGxvd2luZyBzZXJ2aWNlcyBhcmUgc3VwcG9ydGVkOlxuICogY2FsZW5kYXIsXG4gKiBjYW1lcmEsXG4gKiBjb250YWN0cyxcbiAqIGhvbWVraXQsXG4gKiBtaWNyb3Bob25lLFxuICogcGhvdG9zLFxuICogcmVtaW5kZXJzLFxuICogbWVkaWFsaWJyYXJ5LFxuICogbW90aW9uLFxuICogaGVhbHRoLFxuICogc2lyaSxcbiAqIHNwZWVjaC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBidW5kbGVJZCAtIFRoZSBidW5kbGUgaWRlbnRpZmllciBvZiB0aGUgZGVzdGluYXRpb24gYXBwLlxuICovXG5cbi8qKlxuICogR2V0cyBhcHBsaWNhdGlvbiBwZXJtaXNzaW9uIHN0YXRlIG9uIFNpbXVsYXRvci5cbiAqIFRoaXMgbWV0aG9kIHJlcXVpcmVzIFdJWCBhcHBsZXNpbXV0aWxzIHRvIGJlIGluc3RhbGxlZCBvbiB0aGUgc2VydmVyIGhvc3QuXG4gKlxuICogQHBhcmFtIHtHZXRQZXJtaXNzaW9uT3B0aW9uc30gb3B0cyAtIFBlcm1pc3Npb24gb3B0aW9ucy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEVpdGhlciAneWVzJywgJ25vJyBvciAndW5zZXQnXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgcGVybWlzc2lvbiBnZXR0aW5nIGZhaWxzIG9yIHRoZSBkZXZpY2UgaXMgbm90IGEgU2ltdWxhdG9yLlxuICovXG5jb21tYW5kcy5tb2JpbGVHZXRQZXJtaXNzaW9uID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlR2V0UGVybWlzc2lvbiAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBzZXJ2aWNlLFxuICAgIGJ1bmRsZUlkLFxuICB9ID0gcmVxdWlyZU9wdGlvbnMob3B0cyk7XG4gIGlmICghc2VydmljZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlICdzZXJ2aWNlJyBvcHRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgcHJlc2VudGApO1xuICB9XG4gIHJlcXVpcmVTaW11bGF0b3IodGhpcyk7XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMub3B0cy5kZXZpY2UuZ2V0UGVybWlzc2lvbihidW5kbGVJZCwgc2VydmljZSk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNldFBlcm1pc3Npb25zT3B0aW9uc1xuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBhY2Nlc3MgLSBPbmUgb3IgbW9yZSBhY2Nlc3MgcnVsZXMgdG8gc2V0LlxuICogVGhlIGZvbGxvd2luZyBrZXlzIGFyZSBzdXBwb3J0ZWQ6XG4gKiAtIGFsbDogQXBwbHkgdGhlIGFjdGlvbiB0byBhbGwgc2VydmljZXMuXG4gKiAtIGNhbGVuZGFyOiBBbGxvdyBhY2Nlc3MgdG8gY2FsZW5kYXIuXG4gKiAtIGNvbnRhY3RzLWxpbWl0ZWQ6IEFsbG93IGFjY2VzcyB0byBiYXNpYyBjb250YWN0IGluZm8uXG4gKiAtIGNvbnRhY3RzOiBBbGxvdyBhY2Nlc3MgdG8gZnVsbCBjb250YWN0IGRldGFpbHMuXG4gKiAtIGxvY2F0aW9uOiBBbGxvdyBhY2Nlc3MgdG8gbG9jYXRpb24gc2VydmljZXMgd2hlbiBhcHAgaXMgaW4gdXNlLlxuICogLSBsb2NhdGlvbi1hbHdheXM6IEFsbG93IGFjY2VzcyB0byBsb2NhdGlvbiBzZXJ2aWNlcyBhdCBhbGwgdGltZXMuXG4gKiAtIHBob3Rvcy1hZGQ6IEFsbG93IGFkZGluZyBwaG90b3MgdG8gdGhlIHBob3RvIGxpYnJhcnkuXG4gKiAtIHBob3RvczogQWxsb3cgZnVsbCBhY2Nlc3MgdG8gdGhlIHBob3RvIGxpYnJhcnkuXG4gKiAtIG1lZGlhLWxpYnJhcnk6IEFsbG93IGFjY2VzcyB0byB0aGUgbWVkaWEgbGlicmFyeS5cbiAqIC0gbWljcm9waG9uZTogQWxsb3cgYWNjZXNzIHRvIGF1ZGlvIGlucHV0LlxuICogLSBtb3Rpb246IEFsbG93IGFjY2VzcyB0byBtb3Rpb24gYW5kIGZpdG5lc3MgZGF0YS5cbiAqIC0gcmVtaW5kZXJzOiBBbGxvdyBhY2Nlc3MgdG8gcmVtaW5kZXJzLlxuICogLSBzaXJpOiBBbGxvdyB1c2Ugb2YgdGhlIGFwcCB3aXRoIFNpcmkuXG4gKiBUaGUgZm9sbG93aW5nIHZhbHVlcyBhcmUgc3VwcG9ydGVkOlxuICogLSB5ZXM6IFRvIGdyYW50IHRoZSBwZXJtaXNzaW9uXG4gKiAtIG5vOiBUbyByZXZva2UgdGhlIHBlcm1pc3Npb25cbiAqIC0gdW5zZXQ6IFRvIHJlc2V0IHRoZSBwZXJtaXNzaW9uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gYnVuZGxlSWQgLSBUaGUgYnVuZGxlIGlkZW50aWZpZXIgb2YgdGhlIGRlc3RpbmF0aW9uIGFwcC5cbiAqL1xuXG4vKipcbiAqIFNldCBhcHBsaWNhdGlvbiBwZXJtaXNzaW9uIHN0YXRlIG9uIFNpbXVsYXRvci5cbiAqXG4gKiBAc2luY2UgWGNvZGUgU0RLIDExLjRcbiAqIEBwYXJhbSB7U2V0UGVybWlzc2lvbnNPcHRpb25zfSBvcHRzIC0gUGVybWlzc2lvbnMgb3B0aW9ucy5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBwZXJtaXNzaW9uIHNldHRpbmcgZmFpbHMgb3IgdGhlIGRldmljZSBpcyBub3QgYSBTaW11bGF0b3IuXG4gKi9cbmNvbW1hbmRzLm1vYmlsZVNldFBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU2V0UGVybWlzc2lvbnMgKG9wdHMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgYWNjZXNzLFxuICAgIGJ1bmRsZUlkLFxuICB9ID0gcmVxdWlyZU9wdGlvbnMob3B0cyk7XG4gIGlmICghXy5pc1BsYWluT2JqZWN0KGFjY2VzcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSAnYWNjZXNzJyBvcHRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgYSBtYXBgKTtcbiAgfVxuICByZXF1aXJlU2ltdWxhdG9yKHRoaXMpO1xuXG4gIGF3YWl0IHRoaXMub3B0cy5kZXZpY2Uuc2V0UGVybWlzc2lvbnMoYnVuZGxlSWQsIGFjY2Vzcyk7XG59O1xuXG5cbk9iamVjdC5hc3NpZ24oZXh0ZW5zaW9ucywgY29tbWFuZHMsIGhlbHBlcnMpO1xuZXhwb3J0IHsgY29tbWFuZHMsIGhlbHBlcnMgfTtcbmV4cG9ydCBkZWZhdWx0IGV4dGVuc2lvbnM7XG4iXSwiZmlsZSI6ImxpYi9jb21tYW5kcy9wZXJtaXNzaW9ucy5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
